<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Papan Pesan & Feedback</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for a custom look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Luckiest+Guy&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background-color: #e8f5e9; }
        .font-title { font-family: 'Luckiest Guy', cursive; text-shadow: 2px 2px 0px rgba(0,0,0,0.1); }
        .main-header { background-color: #556B2F; }
        .card { background-color: #FFFDD0; border: 2px solid #D2B48C; box-shadow: 4px 4px 0px #D2B48C; }
        .btn { padding: 10px 20px; border-radius: 8px; font-weight: 600; transition: all 0.2s; border: 2px solid black; box-shadow: 3px 3px 0px black; }
        .btn:active { transform: translate(3px, 3px); box-shadow: none; }
        .btn-blue { background-color: #90CAF9; }
        .btn-red { background-color: #EF9A9A; }
        .btn-green { background-color: #A5D6A7; }
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); z-index: 50; display: flex; justify-content: center; align-items: center; }
    </style>
</head>
<body class="p-4 sm:p-6 lg:p-8">
    <div class="max-w-4xl mx-auto">
        <!-- Header Section -->
        <header class="text-center p-4 mb-8 main-header rounded-2xl shadow-lg border-4 border-black">
            <h1 class="font-title text-4xl sm:text-5xl text-yellow-300 tracking-wider">Tinggalkan Jejak Digitalmu!</h1>
        </header>

        <!-- Feedback Form Card -->
        <main id="feedback-section" class="card p-8 rounded-2xl">
            <h2 class="font-title text-3xl text-gray-800 mb-2">Punya Ide, Kritik, atau Saran?</h2>
            <p class="text-gray-600 mb-6">Semua pesan akan dikirim secara pribadi dan aman langsung ke author. Silakan isi formulir di bawah ini.</p>
            
            <form id="feedback-form" action="https://formspree.io/f/mgvnprev" method="POST">
                <div class="mb-4">
                    <label for="name" class="block font-semibold mb-2">Nama Samaran (Opsional):</label>
                    <input type="text" id="name" name="name" class="w-full p-3 border-2 border-gray-400 rounded-lg" placeholder="e.g. Pejuang Semester Akhir">
                </div>
                <div class="mb-6">
                    <label for="message" class="block font-semibold mb-2">Pesanmu:</label>
                    <textarea id="message" name="message" rows="5" class="w-full p-3 border-2 border-gray-400 rounded-lg" placeholder="Tulis apa saja di sini..." required></textarea>
                </div>
                <button type="submit" class="btn btn-blue w-full text-xl">Kirim Pesan!</button>
            </form>
            <p id="form-status" class="mt-4 text-center font-semibold"></p>
        </main>
        
        <!-- Admin Panel (Hidden by default) -->
        <section id="admin-panel" class="hidden mt-8 card p-8 rounded-2xl bg-gray-200 border-gray-500">
            <h2 class="font-title text-3xl text-gray-800 mb-4">Markas Besar Admin</h2>
            <div class="space-y-4">
                <a href="https://formspree.io/f/mgvnprev/submissions" target="_blank" class="block btn bg-green-300 w-full text-center">Lihat Semua Pesan Masuk</a>
                <button id="toggle-form-button" class="btn btn-red w-full">Tutup Formulir untuk Umum</button>
            </div>
        </section>

        <!-- Footer Section with Admin Login -->
        <footer class="text-center mt-8">
            <p class="text-sm text-gray-600">Dibuat dengan kopi dan sedikit keajaiban.</p>
            <button id="admin-login-button" class="text-xs text-gray-400 mt-2 hover:underline">Masuk sebagai Admin</button>
        </footer>
    </div>
    
    <!-- Admin Login Modal -->
    <div id="password-modal" class="modal-overlay hidden">
        <div class="card p-6 rounded-2xl w-full max-w-sm">
            <h3 class="font-title text-2xl mb-4">Akses Terbatas</h3>
            <p class="mb-4">Masukkan kata sandi Admin untuk melanjutkan.</p>
            <input type="password" id="password-input" class="w-full p-3 border-2 border-gray-400 rounded-lg mb-4">
            <p id="password-error" class="text-red-500 text-center mb-4 h-5"></p>
            <div class="flex justify-end space-x-2">
                <button id="cancel-password-btn" class="btn bg-gray-300">Batal</button>
                <button id="submit-password-btn" class="btn btn-blue">Masuk</button>
            </div>
        </div>
    </div>


<script>
document.addEventListener('DOMContentLoaded', () => {
    // DOM Elements
    const adminLoginButton = document.getElementById('admin-login-button');
    const adminPanel = document.getElementById('admin-panel');
    const feedbackSection = document.getElementById('feedback-section');
    const toggleFormButton = document.getElementById('toggle-form-button');
    const passwordModal = document.getElementById('password-modal');
    const passwordInput = document.getElementById('password-input');
    const passwordError = document.getElementById('password-error');
    const cancelPasswordBtn = document.getElementById('cancel-password-btn');
    const submitPasswordBtn = document.getElementById('submit-password-btn');
    
    const ADMIN_PASSWORD = "emggwganteng";

    // --- Admin & Modal Logic ---
    adminLoginButton.addEventListener('click', () => {
        passwordInput.value = '';
        passwordError.textContent = '';
        passwordModal.classList.remove('hidden');
        passwordInput.focus();
    });

    cancelPasswordBtn.addEventListener('click', () => {
        passwordModal.classList.add('hidden');
    });

    const handleAdminLogin = () => {
        if (passwordInput.value === ADMIN_PASSWORD) {
            passwordModal.classList.add('hidden');
            adminPanel.classList.remove('hidden');
        } else {
            passwordError.textContent = 'Kata sandi salah!';
        }
    };
    
    submitPasswordBtn.addEventListener('click', handleAdminLogin);
    passwordInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
            handleAdminLogin();
        }
    });

    // --- Toggle Form Visibility Logic ---
    const updateFormVisibility = () => {
        const isHidden = localStorage.getItem('feedbackFormHidden') === 'true';
        feedbackSection.classList.toggle('hidden', isHidden);
        toggleFormButton.textContent = isHidden ? 'Buka Kembali Formulir' : 'Tutup Formulir untuk Umum';
        toggleFormButton.classList.toggle('btn-red', !isHidden);
        toggleFormButton.classList.toggle('btn-green', isHidden);
    };

    toggleFormButton.addEventListener('click', () => {
        const isHidden = localStorage.getItem('feedbackFormHidden') === 'true';
        localStorage.setItem('feedbackFormHidden', !isHidden);
        updateFormVisibility();
    });

    // --- Form Submission Logic (Formspree) ---
    const form = document.getElementById('feedback-form');
    const formStatus = document.getElementById('form-status');
    
    async function handleSubmit(event) {
        event.preventDefault();
        const data = new FormData(event.target);
        formStatus.textContent = "Mengirim...";
        formStatus.style.color = 'gray';

        fetch(event.target.action, {
            method: form.method,
            body: data,
            headers: { 'Accept': 'application/json' }
        }).then(response => {
            if (response.ok) {
                formStatus.textContent = "Pesan terkirim! Terima kasih.";
                formStatus.style.color = 'green';
                form.reset();
            } else {
                response.json().then(data => {
                    formStatus.textContent = data.errors ? data.errors.map(e => e.message).join(', ') : "Oops! Ada masalah.";
                    formStatus.style.color = 'red';
                });
            }
        }).catch(error => {
            formStatus.textContent = "Oops! Ada masalah koneksi.";
            formStatus.style.color = 'red';
        });
    }
    form.addEventListener("submit", handleSubmit);

    // --- Initial Load ---
    updateFormVisibility();
});
</script>
</body>
</html>

