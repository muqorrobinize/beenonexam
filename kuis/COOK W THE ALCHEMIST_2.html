<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE ALCHEMIST: CH.02 TRANSMUTATION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        void: '#050505',
                        surface: '#0a0a0a',
                        border: '#27272a',
                        accent: '#10b981', 
                        accentdim: '#064e3b',
                        mist: '#a1a1aa',
                        text: '#e4e4e7'
                    },
                    fontFamily: {
                        sans: ['Plus Jakarta Sans', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    typography: (theme) => ({
                        DEFAULT: {
                            css: {
                                color: theme('colors.mist'),
                                h1: { color: theme('colors.text') },
                                h2: { color: theme('colors.text') },
                                h3: { color: theme('colors.text') },
                                strong: { color: theme('colors.accent') },
                                blockquote: { borderLeftColor: theme('colors.accent'), color: theme('colors.text') },
                                code: { color: theme('colors.accent') },
                            },
                        },
                    }),
                    animation: {
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #050505; color: #e4e4e7; }
        .glass-header { background: rgba(5, 5, 5, 0.9); backdrop-filter: blur(16px); border-bottom: 1px solid rgba(39, 39, 42, 0.5); }
        .code-scroll::-webkit-scrollbar { height: 6px; width: 6px; }
        .code-scroll::-webkit-scrollbar-track { background: #0a0a0a; }
        .code-scroll::-webkit-scrollbar-thumb { background: #27272a; rounded: 3px; }
        .input-focus:focus { outline: none; border-color: #10b981; box-shadow: 0 0 0 1px #10b981; }
        
        .card-flip { perspective: 1000px; }
        .card-inner { position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; }
        .flip-active .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; border-radius: 0.5rem; border: 1px solid #27272a; }
        .card-back { background-color: #0a0a0a; color: white; transform: rotateY(180deg); border-color: #10b981; }
        .card-front { background-color: #0a0a0a; color: #a1a1aa; }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col font-sans selection:bg-accent selection:text-black overflow-x-hidden">

    <!-- Navbar -->
    <nav class="fixed top-0 w-full z-50 glass-header">
        <div class="max-w-3xl mx-auto px-6 py-5 flex justify-between items-center">
            <div class="font-bold tracking-tight text-lg text-accent flex items-center gap-3">
                <span class="text-xl border border-accent px-2 py-0.5 rounded-sm font-serif italic text-white bg-accentdim/20">Ta</span>
                <span class="text-sm tracking-widest text-mist">THE ALCHEMIST</span>
            </div>
            <div class="text-[10px] uppercase tracking-[0.2em] text-gray-600 font-mono hidden md:block">
                Chapter 02: Transmutation
            </div>
        </div>
    </nav>

    <main class="flex-grow pt-32 pb-24 px-6 md:px-0">
        <div class="max-w-2xl mx-auto">

            <!-- GATEKEEPER SECTION (LOGIN) -->
            <section id="gate-section" class="min-h-[50vh] flex flex-col justify-center items-center text-center space-y-8 animate-fade-in">
                <div class="space-y-4">
                    <div class="inline-block px-3 py-1 rounded-full bg-red-900/20 border border-red-900/50 text-red-500 text-[10px] uppercase tracking-widest font-mono">
                        Security Protocol Active
                    </div>
                    <h1 class="text-3xl md:text-5xl font-bold text-white">
                        Identifikasi Diperlukan.
                    </h1>
                    <p class="text-mist max-w-md mx-auto">
                        Materi ini terenskripsi. Masukkan <span class="text-accent font-mono">Genesis Key</span> yang lo dapatkan dari Chapter 1 untuk membuktikan kompetensi dasar lo.
                    </p>
                </div>

                <div class="w-full max-w-md space-y-4">
                    <input type="text" id="genesis-key-input" placeholder="XXXX-XXXX-XXXX-XXXX" class="w-full bg-void border border-border p-4 text-center text-white rounded-sm input-focus transition-all font-mono text-lg uppercase tracking-widest">
                    <button onclick="unlockGate()" class="w-full bg-white text-black px-8 py-3 font-bold text-sm hover:bg-gray-200 transition-all rounded-sm">
                        DEKRIPSI & MASUK
                    </button>
                    <p id="gate-error" class="text-red-500 text-xs font-mono hidden">Error: Kunci invalid atau data korup.</p>
                    <p class="text-[10px] text-gray-700">Belum punya kunci? <a href="#" class="text-gray-500 underline">Selesaikan Chapter 1 dulu.</a></p>
                </div>
            </section>

            <!-- MAIN CONTENT (Initially Hidden) -->
            <div id="main-content" class="hidden space-y-24">
                
                <!-- Welcome Header -->
                <header class="space-y-6 border-b border-border pb-8">
                    <div class="flex items-center gap-2 text-accent font-mono text-xs uppercase tracking-widest">
                        <span class="w-2 h-2 bg-accent rounded-full animate-pulse"></span>
                        Akses Diberikan
                    </div>
                    <h1 class="text-4xl font-bold text-white">
                        Selamat Kembali, <span id="user-display-name" class="text-accent underline decoration-accent/30 underline-offset-8">User</span>.
                    </h1>
                    <p class="text-mist text-lg leading-relaxed">
                        Di Chapter 1, lo belajar menyusun bata (HTML). Di Chapter 2, kita akan belajar memasang listrik dan otak. Kita akan mengubah halaman statis ini menjadi <strong class="text-white">Aplikasi Hidup</strong>.
                    </p>
                    <div class="bg-surface border border-border p-4 rounded text-xs font-mono text-gray-500 flex justify-between">
                        <span>DATA CH.01:</span>
                        <span>PRE: <span id="p1-pre">0</span>% | POST: <span id="p1-post">0</span>%</span>
                    </div>
                </header>

                <!-- PRE-TEST PART 2 -->
                <section id="pretest-section" class="bg-surface border border-border p-8 rounded-lg">
                    <div id="pretest-intro">
                        <h2 class="text-2xl font-bold text-white mb-4">Kalibrasi Lanjutan</h2>
                        <p class="text-mist mb-6 text-sm">
                            Sebelum kita bicara soal API dan Logic, gue perlu cek asumsi lo tentang bagaimana internet bekerja.
                        </p>
                        <button onclick="startPreTest()" class="bg-accent text-black px-6 py-3 font-bold text-sm hover:bg-emerald-400 transition-all rounded-sm w-full md:w-auto">
                            MULAI DIAGNOSA LEVEL 2
                        </button>
                    </div>
                    <div id="pretest-container" class="hidden">
                        <div class="flex justify-between items-center mb-6">
                            <span class="text-xs font-mono text-accent">PERTANYAAN <span id="pre-q-num">1</span>/3</span>
                        </div>
                        <h3 id="pre-q-text" class="text-xl font-medium text-white mb-6 leading-relaxed">?</h3>
                        <div id="pre-options" class="space-y-3"></div>
                    </div>
                </section>

                <!-- MATERI SECTION -->
                <section id="materi-section" class="opacity-20 blur-sm pointer-events-none transition-all duration-1000 space-y-20">
                    
                    <!-- MATERI 1: LOGIC & STATE -->
                    <div class="prose prose-lg prose-invert max-w-none">
                        <h2 class="text-white">1. Memberi "Ingatan" pada Halaman (State)</h2>
                        <p>
                            HTML itu pelupa. Lo refresh, dia reset. Untuk membuat Game, Kuis, atau Flashcard, lo butuh <strong>State (Ingatan)</strong>.
                        </p>
                        <p>
                            Bayangkan lo mau bikin Flashcard. Lo butuh HTML untuk kartunya, CSS untuk animasinya, tapi lo butuh <strong>Javascript</strong> untuk mengingat: <em>"Sekarang lagi nampilin kartu depan atau belakang?"</em>
                        </p>
                    </div>

                    <!-- MATERI 2: THE INFINITE CANVAS (Detailed Features) -->
                    <div class="prose prose-lg prose-invert max-w-none">
                        <h2 class="text-white">2. Anatomi Mesin Digital</h2>
                        <p>
                            Single File HTML itu bukan cuma halaman brosur. Itu adalah <em>Runtime Environment</em> yang lengkap. Lo bisa bikin aplikasi kompleks tanpa server. Mari kita bedah satu per satu:
                        </p>

                        <!-- FITUR A: FLASHCARD -->
                        <div class="border-l-2 border-accent pl-6 py-2 my-8">
                            <h3 class="text-white mt-0">A. Mesin Flashcard (Hafalan)</h3>
                            <p class="text-sm">
                                <strong>Logika Dasar:</strong> Ada dua lapis konten (Depan/Belakang) dalam satu kotak. Javascript bertugas membalik kelas CSS (misal: `rotate-180`) saat diklik.
                            </p>
                            <!-- Demo Flashcard -->
                            <div class="not-prose my-6 p-6 bg-surface border border-border rounded-lg text-center">
                                <h4 class="text-[10px] font-mono text-mist uppercase tracking-widest mb-4">Demo: Logic Toggle</h4>
                                <div class="card-flip w-full max-w-xs mx-auto h-40 cursor-pointer group" onclick="this.classList.toggle('flip-active')">
                                    <div class="card-inner">
                                        <div class="card-front flex flex-col gap-2 bg-void border border-border">
                                            <span class="text-xl font-bold text-white">Apa itu HTML?</span>
                                            <span class="text-[10px] text-gray-500">(Klik untuk balik)</span>
                                        </div>
                                        <div class="card-back flex flex-col gap-2 bg-accentdim border border-accent text-white">
                                            <span class="text-sm font-bold">Hypertext Markup Language</span>
                                            <span class="text-[10px] text-accent font-mono">Struktur Dasar Web</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- FITUR B: KUIS ENGINE -->
                        <div class="border-l-2 border-accent pl-6 py-2 my-8">
                            <h3 class="text-white mt-0">B. Mesin Kuis & Ujian</h3>
                            <p class="text-sm">
                                <strong>Logika Dasar:</strong> Lo menyimpan soal dalam <strong>Array</strong> (Daftar). Javascript akan menampilkan soal satu per satu, mengecek jawaban user, dan menyimpan skor di variabel sementara.
                            </p>
                            <!-- Demo Quiz -->
                            <div class="not-prose my-6 p-4 bg-surface border border-border rounded-lg">
                                <h4 class="text-[10px] font-mono text-mist uppercase tracking-widest mb-4">Demo: Logic Array & Score</h4>
                                <div id="mini-quiz-ui" class="space-y-3">
                                    <p class="text-white text-sm font-bold">Soal: 1 + 1 = ?</p>
                                    <div class="grid grid-cols-2 gap-2">
                                        <button onclick="miniQuiz(false)" class="bg-void border border-border p-2 text-xs text-mist hover:text-white hover:border-red-500 transition-colors">11</button>
                                        <button onclick="miniQuiz(true)" class="bg-void border border-border p-2 text-xs text-mist hover:text-white hover:border-accent transition-colors">2</button>
                                    </div>
                                    <p id="mini-quiz-result" class="text-xs text-mist h-4 italic">Status: Menunggu jawaban...</p>
                                </div>
                            </div>
                        </div>

                        <!-- FITUR C: GAME LOOP -->
                        <div class="border-l-2 border-accent pl-6 py-2 my-8">
                            <h3 class="text-white mt-0">C. Game Loop Sederhana</h3>
                            <p class="text-sm">
                                <strong>Logika Dasar:</strong> Menggunakan pengacakan (`Math.random`). Komputer memilih angka/pilihan, User menebak. Jika cocok = Menang.
                            </p>
                            <!-- Demo Game -->
                            <div class="not-prose my-6 p-4 bg-surface border border-border rounded-lg">
                                <h4 class="text-[10px] font-mono text-mist uppercase tracking-widest mb-4">Demo: Logic Random Number (Tebak 1-3)</h4>
                                <div class="flex gap-2 justify-center mb-3">
                                    <button onclick="miniGame(1)" class="w-10 h-10 rounded-full bg-void border border-border hover:border-accent text-white font-bold">1</button>
                                    <button onclick="miniGame(2)" class="w-10 h-10 rounded-full bg-void border border-border hover:border-accent text-white font-bold">2</button>
                                    <button onclick="miniGame(3)" class="w-10 h-10 rounded-full bg-void border border-border hover:border-accent text-white font-bold">3</button>
                                </div>
                                <p id="mini-game-result" class="text-center text-xs text-mist h-4">Komputer menyembunyikan angka...</p>
                            </div>
                        </div>

                         <!-- FITUR D: PERSONALISASI -->
                         <div class="border-l-2 border-accent pl-6 py-2 my-8">
                            <h3 class="text-white mt-0">D. Personalisasi (Interaksi Waktu)</h3>
                            <p class="text-sm">
                                <strong>Logika Dasar:</strong> Javascript bisa membaca jam di HP/Laptop user. Dengan logika `if/else` sederhana, website bisa menyapa "Selamat Pagi" atau "Selamat Malam" secara otomatis. Ini membuat web terasa hidup.
                            </p>
                            <!-- Demo Greeting -->
                            <div class="not-prose my-6 p-4 bg-surface border border-border rounded-lg text-center">
                                <h4 class="text-[10px] font-mono text-mist uppercase tracking-widest mb-2">Demo: Real-time Greeting</h4>
                                <p id="dynamic-greeting" class="text-xl font-bold text-accent animate-pulse">Halo...</p>
                                <p class="text-[10px] text-gray-600 mt-1">(Mendeteksi waktu lokal perangkat lo)</p>
                            </div>
                        </div>
                    </div>

                    <!-- MATERI 3: THE API -->
                    <div class="prose prose-lg prose-invert max-w-none">
                        <h2 class="text-white">3. The API (Jembatan Dunia Luar)</h2>
                        <p>
                            Semua fitur di atas (Kuis, Game, Greeting) berjalan di dalam browser (Lokal). Tapi bagaimana jika lo mau data cuaca? Atau data saham? Atau jawaban AI?
                        </p>
                        <p>
                            Lo butuh <strong>API (Application Programming Interface)</strong>. Bayangkan API sebagai pelayan restoran:
                        </p>
                        <ul class="list-none pl-0 space-y-4 text-sm">
                            <li class="flex gap-4 items-start">
                                <span class="bg-accent/10 text-accent font-mono px-2 rounded">Lo</span>
                                <span>User / Website (Client).</span>
                            </li>
                            <li class="flex gap-4 items-start">
                                <span class="bg-accent/10 text-accent font-mono px-2 rounded">Dapur</span>
                                <span>Server (Google, OpenAI, Database Cuaca).</span>
                            </li>
                            <li class="flex gap-4 items-start">
                                <span class="bg-accent/10 text-accent font-mono px-2 rounded">Pelayan (API)</span>
                                <span>Lo pesan ke Pelayan, Pelayan ke Dapur, Pelayan bawa makanan (Data) ke Lo. Lo gak boleh masuk dapur langsung.</span>
                            </li>
                        </ul>

                        <h3>Apa itu API Key?</h3>
                        <p>
                            Bayangkan restoran itu VIP. Lo butuh <strong>Kartu Member</strong> untuk memesan. Kartu itu adalah <strong>API Key</strong>. Tanpa kunci ini, pelayan (API) akan menolak pesanan lo.
                        </p>

                        <!-- API Simulator -->
                        <div class="not-prose my-8 border border-dashed border-gray-700 p-6 rounded bg-void relative overflow-hidden">
                            <div class="absolute top-0 left-0 bg-gray-800 text-xs text-white px-2 py-1 font-mono">API SIMULATOR v1.0</div>
                            
                            <div class="flex flex-col md:flex-row gap-4 items-center justify-between mt-6">
                                <div class="text-center w-full">
                                    <div class="text-xs text-mist mb-2">CLIENT (Browser)</div>
                                    <button onclick="fetchSimulatedData()" id="api-btn" class="bg-white text-black px-4 py-2 rounded text-sm font-bold hover:bg-gray-200 transition-all">
                                        Request Data
                                    </button>
                                </div>

                                <div class="flex-grow flex items-center justify-center relative w-full h-12">
                                    <div id="api-flow" class="h-0.5 w-full bg-gray-800 relative overflow-hidden">
                                        <div id="api-packet" class="absolute top-1/2 -translate-y-1/2 left-0 w-3 h-3 bg-accent rounded-full shadow-[0_0_10px_#10b981] hidden"></div>
                                    </div>
                                    <div class="absolute text-[10px] font-mono bg-void px-2 text-gray-500">API Bridge</div>
                                </div>

                                <div class="text-center w-full">
                                    <div class="text-xs text-mist mb-2">SERVER (Database)</div>
                                    <div id="api-result" class="bg-surface border border-border p-3 rounded text-xs font-mono text-accent h-24 flex items-center justify-center w-full overflow-hidden">
                                        // Menunggu Request...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- MATERI 4: KENAPA INI PENTING? (UPDATED) -->
                    <div class="prose prose-lg prose-invert max-w-none border-t border-border pt-8">
                        <h2 class="text-white">4. Relevansi di Era AI: Menjadi Arsitek</h2>
                        <p>
                            Lupakan contoh jadul seperti "Dashboard Crypto" atau "Kuis Karyawan" kalau itu gak relevan buat lo.
                            Poin utamanya adalah: <strong>AI sangat fleksibel</strong>. Dia bisa menyajikan Single File HTML apapun yang lo imajinasikan.
                        </p>
                        
                        <div class="bg-accent/5 border border-accent/20 p-6 rounded-lg my-6">
                            <p class="text-lg text-white font-bold mb-2">The Golden Rule:</p>
                            <p class="text-mist italic">
                                "Lo TIDAK PERLU paham coding untuk membuat ini. Lo cuma perlu paham LOGIKA-nya, lalu perintahkan AI untuk menulis kodenya."
                            </p>
                        </div>

                        <p>
                            Bayangkan apa yang bisa lo buat sekarang, hanya dengan prompt yang tepat:
                        </p>

                        <ul class="space-y-4 list-none pl-0">
                            <li class="bg-surface p-4 rounded border border-border">
                                <strong class="text-accent block text-lg mb-1">1. Interactive Research Paper (Makalah Hidup)</strong>
                                <span class="text-sm">Jangan kumpulkan PDF mati ke dosen. Buat HTML di mana dosen bisa menggeser "Slider Inflasi" dan melihat grafik ekonomi di makalah lo berubah secara real-time.</span>
                            </li>
                            <li class="bg-surface p-4 rounded border border-border">
                                <strong class="text-accent block text-lg mb-1">2. Second Brain (Personal Wiki)</strong>
                                <span class="text-sm">Buat sistem catatan kuliah yang saling terhubung (seperti Obsidian), tapi berjalan di satu file browser. Bisa di-search instan, offline, dan 100% milik lo.</span>
                            </li>
                            <li class="bg-surface p-4 rounded border border-border">
                                <strong class="text-accent block text-lg mb-1">3. Kalkulator Skripsi Spesifik</strong>
                                <span class="text-sm">Penelitian lo butuh rumus aneh yang gak ada di Excel? Minta AI buatkan kalkulator HTML khusus untuk menghitung data spesifik lo. Hemat waktu berjam-jam.</span>
                            </li>
                             <li class="bg-surface p-4 rounded border border-border">
                                <strong class="text-accent block text-lg mb-1">4. Portofolio Interaktif</strong>
                                <span class="text-sm">CV bukan lagi kertas. Buat HTML di mana recruiter bisa "bermain" simulasi proyek yang pernah lo kerjakan.</span>
                            </li>
                        </ul>
                        
                        <p class="mt-6 text-sm text-gray-500">
                            *Semua contoh di atas adalah Single File HTML. AI modern bisa membuatnya dalam hitungan detik.
                        </p>
                    </div>

                </section>

                <!-- POST-TEST PART 2 -->
                <section id="posttest-section" class="bg-surface border border-border p-8 rounded-lg hidden">
                    <div id="posttest-intro">
                        <h2 class="text-2xl font-bold text-white mb-4">Validasi Akhir (Transmutasi)</h2>
                        <p class="text-mist mb-6 text-sm">
                            Lo udah paham konsepnya. Sekarang buktikan bahwa lo layak mendapatkan <strong>Exodus Key</strong>.
                        </p>
                        <button onclick="startPostTest()" class="bg-white text-black px-8 py-3 font-bold text-sm hover:bg-gray-200 transition-all rounded-sm w-full md:w-auto">
                            UJI PEMAHAMAN FINAL
                        </button>
                    </div>
                    <div id="posttest-container" class="hidden">
                         <div class="flex justify-between items-center mb-6">
                            <span class="text-xs font-mono text-accent">PERTANYAAN FINAL <span id="post-q-num">1</span>/3</span>
                        </div>
                        <h3 id="post-q-text" class="text-xl font-medium text-white mb-6 leading-relaxed">?</h3>
                        <div id="post-options" class="space-y-3"></div>
                    </div>
                </section>

                <!-- FINAL RESULT (EXODUS KEY) -->
                <div id="result-section" class="hidden text-center py-12 animate-fade-in border-t border-border">
                    <h2 class="text-3xl font-bold text-white mb-2">Transmutasi Selesai</h2>
                    <p class="text-mist text-sm mb-8">Evolusi Logic Terkonfirmasi</p>
                    
                    <div class="flex justify-center gap-4 mb-10 text-xs font-mono text-gray-500">
                        <div>CH.1 SCORE: <span id="final-s1" class="text-white">0</span></div>
                        <div>|</div>
                        <div>CH.2 SCORE: <span id="final-s2" class="text-accent">0</span></div>
                    </div>

                    <div id="final-analysis" class="bg-surface border border-accent/20 p-6 rounded-lg max-w-xl mx-auto text-left prose prose-invert">
                        <!-- JS Analysis -->
                    </div>
                </div>

            </div>
        </div>
    </main>

    <footer class="border-t border-border bg-black py-10 mt-20">
        <div class="max-w-2xl mx-auto px-6 text-center text-xs text-gray-600 font-mono">
            &copy; 2025 THE ALCHEMIST PROJECT. <br>
            <span class="text-[10px] mt-2 block">Don't trust the code. Trust the logic.</span>
        </div>
    </footer>

    <script>
        // --- STATE MANAGEMENT ---
        let userState = {
            name: "Guest",
            ch1_pre: 0,
            ch1_post: 0,
            ch2_pre: 0,
            ch2_post: 0,
            qIndex: 0,
            isPre: true
        };

        // --- MINI DEMO LOGIC ---
        function miniQuiz(isCorrect) {
            const el = document.getElementById('mini-quiz-result');
            if(isCorrect) {
                el.innerText = "Benar! Logic: if(input === 2) return true";
                el.className = "text-xs text-accent font-bold h-4";
            } else {
                el.innerText = "Salah. Logic: else return false";
                el.className = "text-xs text-red-500 font-bold h-4";
            }
        }

        function miniGame(choice) {
            const target = Math.floor(Math.random() * 3) + 1;
            const el = document.getElementById('mini-game-result');
            
            if(choice === target) {
                el.innerHTML = `Menang! Komputer pilih <span class="text-accent">${target}</span>.`;
                el.className = "text-center text-xs text-white h-4 font-bold";
            } else {
                el.innerHTML = `Kalah. Komputer pilih <span class="text-red-500">${target}</span>.`;
                el.className = "text-center text-xs text-mist h-4";
            }
        }

        function updateGreeting() {
            const el = document.getElementById('dynamic-greeting');
            const hour = new Date().getHours();
            let text = "Halo";
            if(hour < 12) text = "Selamat Pagi";
            else if(hour < 18) text = "Selamat Siang";
            else text = "Selamat Malam";
            
            el.innerText = `"${text}, ${userState.name || 'User'}."`;
        }

        // --- QUESTIONS DATABASE (Part 2 Focused) ---
        const questions = [
            {
                q: "Untuk membuat 'Game Tebak Angka' sederhana, elemen logika apa yang paling krusial?",
                options: [
                    "Warna background yang cerah (CSS).",
                    "Fungsi pengacak angka (Randomizer) dan pembanding (If/Else).",
                    "Koneksi internet super cepat.",
                    "Database SQL yang mahal."
                ],
                correct: 1
            },
            {
                q: "Apa peran utama AI dalam pembuatan Single File HTML modern?",
                options: [
                    "Sebagai 'Kuli Koding' yang menulis syntax, sementara kita menjadi Arsitek Logika.",
                    "Hanya untuk mencari gambar.",
                    "Untuk membuat virus komputer.",
                    "Tidak ada gunanya."
                ],
                correct: 0
            },
            {
                q: "Apa contoh 'Modern Artifact' yang relevan untuk mahasiswa?",
                options: [
                    "Dashboard Crypto yang rumit.",
                    "Makalah Interaktif dengan grafik yang bisa dimainkan dosen.",
                    "Aplikasi Chatting seperti WhatsApp.",
                    "Game FPS 3D berat."
                ],
                correct: 1
            }
        ];

        // --- GATE LOGIC (DECRYPTION) ---
        function unlockGate() {
            const input = document.getElementById('genesis-key-input').value.trim().replace(/-/g, '');
            const errorMsg = document.getElementById('gate-error');
            
            if (!input) {
                errorMsg.classList.remove('hidden');
                return;
            }

            try {
                // 1. Base64 Decode
                const decodedStr = atob(input);
                
                // 2. De-obfuscate (Shift char code -1)
                let jsonStr = "";
                for (let i = 0; i < decodedStr.length; i++) {
                    jsonStr += String.fromCharCode(decodedStr.charCodeAt(i) - 1);
                }

                // 3. Parse JSON
                const data = JSON.parse(jsonStr);

                // Validasi struktur data dasar
                if (!data.n || data.s1 === undefined || data.s2 === undefined) {
                    throw new Error("Invalid Structure");
                }

                // Load Data
                userState.name = data.n;
                userState.ch1_pre = data.s1;
                userState.ch1_post = data.s2;

                // Update UI
                document.getElementById('user-display-name').innerText = userState.name;
                document.getElementById('p1-pre').innerText = Math.round((userState.ch1_pre/3)*100);
                document.getElementById('p1-post').innerText = Math.round((userState.ch1_post/3)*100);

                // Start Greeting Clock
                updateGreeting();
                setInterval(updateGreeting, 60000); // Update every minute

                // Transition
                document.getElementById('gate-section').classList.add('hidden');
                document.getElementById('main-content').classList.remove('hidden');
                window.scrollTo(0, 0);

            } catch (e) {
                console.error(e);
                errorMsg.innerText = "Error: Kunci Invalid. Pastikan menyalin dari Chapter 1 dengan benar.";
                errorMsg.classList.remove('hidden');
            }
        }

        // --- PRE-TEST LOGIC ---
        function startPreTest() {
            document.getElementById('pretest-intro').classList.add('hidden');
            document.getElementById('pretest-container').classList.remove('hidden');
            renderQ();
        }

        function renderQ() {
            const container = userState.isPre ? 'pre' : 'post';
            const q = questions[userState.qIndex];
            
            document.getElementById(`${container}-q-num`).innerText = userState.qIndex + 1;
            document.getElementById(`${container}-q-text`).innerText = q.q;
            
            const opts = document.getElementById(`${container}-options`);
            opts.innerHTML = '';
            
            q.options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = "w-full text-left p-4 rounded bg-void border border-border hover:border-accent hover:text-white text-mist transition-all text-sm group flex justify-between items-center";
                btn.innerHTML = `<span>${opt}</span> <span class="opacity-0 group-hover:opacity-100 text-accent transition-opacity">â†’</span>`;
                btn.onclick = () => answer(i);
                opts.appendChild(btn);
            });
        }

        function answer(idx) {
            if (idx === questions[userState.qIndex].correct) {
                if (userState.isPre) userState.ch2_pre++; else userState.ch2_post++;
            }
            
            userState.qIndex++;
            if (userState.qIndex < questions.length) {
                renderQ();
            } else {
                finishSection();
            }
        }

        function finishSection() {
            if (userState.isPre) {
                // Unlock Materi
                document.getElementById('pretest-section').innerHTML = `
                    <div class="p-6 text-center border border-accent/20 bg-accent/5 rounded-lg">
                        <h3 class="text-white font-bold mb-2">Kalibrasi Selesai</h3>
                        <p class="text-mist text-sm">Sekarang, mari kita bedah mesinnya.</p>
                    </div>
                `;
                const materi = document.getElementById('materi-section');
                materi.classList.remove('opacity-20', 'blur-sm', 'pointer-events-none');
                
                // Activate Post Test trigger at bottom
                document.getElementById('posttest-section').classList.remove('hidden');

                setTimeout(() => materi.scrollIntoView({behavior: 'smooth'}), 500);
            } else {
                // Show Result
                document.getElementById('posttest-section').classList.add('hidden');
                document.getElementById('result-section').classList.remove('hidden');
                renderFinalResult();
            }
        }

        // --- SIMULATED API LOGIC ---
        function fetchSimulatedData() {
            const btn = document.getElementById('api-btn');
            const resultBox = document.getElementById('api-result');
            const packet = document.getElementById('api-packet');
            
            btn.disabled = true;
            btn.innerText = "Requesting...";
            resultBox.innerText = "// Fetching Data...";
            packet.classList.remove('hidden');
            
            // Animation: Packet goes Client -> Server
            packet.style.left = '0%';
            packet.style.transition = 'left 1s ease-in';
            
            setTimeout(() => {
                packet.style.left = '100%';
            }, 50);

            setTimeout(() => {
                // Server Processing
                resultBox.innerText = "// Processing 200 OK...";
                resultBox.classList.add('text-white');
                
                // Packet Return
                packet.style.transition = 'left 1s ease-out';
                packet.style.left = '0%';
            }, 1200);

            setTimeout(() => {
                // Data Received
                const quotes = [
                    '"Stay hungry, stay foolish."',
                    '"Code is poetry."',
                    '"Simplicity is the ultimate sophistication."',
                    '"Hello World."'
                ];
                const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
                
                resultBox.innerHTML = `<span class="text-accent">Success (JSON):</span><br>{ "data": "${randomQuote}" }`;
                btn.disabled = false;
                btn.innerText = "Request Data";
                packet.classList.add('hidden');
            }, 2300);
        }

        // --- POST-TEST START ---
        function startPostTest() {
            userState.isPre = false;
            userState.qIndex = 0;
            document.getElementById('posttest-intro').classList.add('hidden');
            document.getElementById('posttest-container').classList.remove('hidden');
            renderQ();
        }

        // --- ENCRYPTION LOGIC (EXODUS KEY) ---
        function generateExodusKey() {
            // Pack Data: Nama, Ch1 Scores, Ch2 Scores, Timestamp
            const payload = {
                n: userState.name,
                c1: [userState.ch1_pre, userState.ch1_post],
                c2: [userState.ch2_pre, userState.ch2_post],
                rank: "ALCHEMIST_L2",
                t: Date.now()
            };

            const jsonStr = JSON.stringify(payload);
            
            // Client-side simple obfuscation (Shift +1)
            let obfuscated = "";
            for (let i = 0; i < jsonStr.length; i++) {
                obfuscated += String.fromCharCode(jsonStr.charCodeAt(i) + 1);
            }

            const encoded = btoa(obfuscated).replace(/=/g, '');
            const chunks = encoded.match(/.{1,4}/g);
            return chunks ? chunks.join('-') : encoded;
        }

        function renderFinalResult() {
            const ch2_score = Math.round((userState.ch2_post / 3) * 100);
            
            document.getElementById('final-s1').innerText = Math.round((userState.ch1_post/3)*100) + "%";
            document.getElementById('final-s2').innerText = ch2_score + "%";

            const analysis = document.getElementById('final-analysis');
            let key = '';

            const passed = ch2_score >= 66;

            if (passed) {
                key = generateExodusKey();
                analysis.innerHTML = `
                    <p class="text-white font-bold text-lg mb-2">Akses Level 3 Terbuka.</p>
                    <p class="mb-6">Lo sekarang paham bahwa HTML bisa 'berpikir' (Logic) dan 'berbicara' (API). Lo bukan lagi sekadar menyusun bata, lo sedang merakit mesin.</p>
                    
                    <div class="bg-black border border-accent p-6 rounded relative group mt-6 break-words">
                        <div class="absolute top-0 right-0 bg-accent text-black px-3 py-1 text-[10px] font-bold font-mono uppercase tracking-wider">EXODUS KEY</div>
                        
                        <p class="text-xs text-mist font-mono mb-2 uppercase tracking-widest">Simpan Kunci Ini:</p>
                        <div class="font-mono text-xl tracking-widest text-white select-all cursor-text mb-4 break-all hover:text-accent transition-colors border border-dashed border-gray-800 p-4 bg-void/50">${key}</div>
                        
                        <p class="text-[10px] text-gray-500 border-t border-gray-800 pt-3 italic">
                            Kunci ini berisi akumulasi data Chapter 1 & 2. Gunakan untuk proyek selanjutnya.
                        </p>
                    </div>
                `;
            } else {
                analysis.innerHTML = `
                    <p class="text-white font-bold text-lg">Logic Error.</p>
                    <p class="mb-4">Pemahaman lo tentang API atau State masih kabur. Jangan memaksa lanjut jika pondasi retak.</p>
                    <button onclick="location.reload()" class="text-accent text-sm underline underline-offset-4 hover:text-white transition-colors">
                        Reset Protokol Chapter 2
                    </button>
                `;
            }
        }
    </script>
</body>
</html>