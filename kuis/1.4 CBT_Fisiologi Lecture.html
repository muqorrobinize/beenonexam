<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fisiologi Master Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            background-color: #1a0b1a;
            color: white;
            min-height: 100vh;
        }

        /* Gradient Mesh Background with Magenta */
        .mesh-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            background: radial-gradient(at 0% 0%, hsla(300,76%,40%,1) 0, transparent 50%), 
                        radial-gradient(at 50% 0%, hsla(320,80%,50%,1) 0, transparent 50%), 
                        radial-gradient(at 100% 0%, hsla(340,70%,45%,1) 0, transparent 50%), 
                        radial-gradient(at 0% 50%, hsla(280,90%,30%,1) 0, transparent 50%), 
                        radial-gradient(at 100% 50%, hsla(310,85%,40%,1) 0, transparent 50%), 
                        radial-gradient(at 0% 100%, hsla(290,70%,35%,1) 0, transparent 50%), 
                        radial-gradient(at 50% 100%, hsla(330,80%,45%,1) 0, transparent 50%), 
                        radial-gradient(at 100% 100%, hsla(310,75%,40%,1) 0, transparent 50%);
            filter: blur(40px);
            opacity: 0.8;
        }

        .glass-panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1rem;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        .btn-mode {
            transition: all 0.3s ease;
        }
        .btn-mode:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 0, 255, 0.3);
            background: rgba(255, 255, 255, 0.2);
        }

        /* Flashcard Styles */
        .flashcard-container {
            perspective: 1000px;
        }
        .flashcard {
            width: 100%;
            height: 300px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }
        .flashcard.flipped {
            transform: rotateY(180deg);
        }
        .flashcard-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
            border-radius: 1rem;
            background: rgba(20, 20, 20, 0.8);
            border: 2px solid #ff00ff;
        }
        .flashcard-back {
            background: rgba(50, 0, 50, 0.9);
            transform: rotateY(180deg);
            border-color: #00ffcc;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(0,0,0,0.1);
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(255,0,255,0.5);
            border-radius: 4px;
        }
        
        .correct-anim {
            animation: pulse-green 0.5s ease-in-out;
        }
        .wrong-anim {
            animation: shake 0.5s ease-in-out;
        }

        /* SVG Styles */
        .illustration-svg {
            width: 100%;
            max-width: 500px;
            height: auto;
            margin: 1rem auto;
            display: block;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .svg-text {
            font-family: 'Poppins', sans-serif;
            fill: white;
            font-size: 12px;
        }
        .svg-label {
            fill: #ffcefe;
            font-weight: bold;
            font-size: 14px;
        }

        @keyframes pulse-green {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); box-shadow: 0 0 15px #10B981; }
            100% { transform: scale(1); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
    </style>
</head>
<body>

    <div class="mesh-background"></div>

    <div class="container mx-auto px-4 py-8 max-w-4xl relative z-10">
        
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-300 via-magenta-500 to-purple-400 drop-shadow-lg mb-2">
                Fisiologi Master
            </h1>
            <p class="text-pink-200 opacity-80">Sistem Integumen, Tulang, Sendi, & Otot</p>
        </header>

        <!-- Main Menu -->
        <div id="main-menu" class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div onclick="showMode('summary')" class="btn-mode glass-panel p-8 text-center cursor-pointer group">
                <i class="fas fa-book-open text-5xl text-pink-400 mb-4 group-hover:text-white transition-colors"></i>
                <h2 class="text-2xl font-bold mb-2">Mode Ringkasan</h2>
                <p class="text-sm opacity-70">Pelajari materi komprehensif dengan ilustrasi.</p>
            </div>
            
            <div onclick="showMode('flashcard')" class="btn-mode glass-panel p-8 text-center cursor-pointer group">
                <i class="fas fa-sticky-note text-5xl text-purple-400 mb-4 group-hover:text-white transition-colors"></i>
                <h2 class="text-2xl font-bold mb-2">Mode Flashcard</h2>
                <p class="text-sm opacity-70">Hafalkan istilah penting dengan kartu balik.</p>
            </div>

            <div onclick="showMode('practice')" class="btn-mode glass-panel p-8 text-center cursor-pointer group">
                <i class="fas fa-dumbbell text-5xl text-green-400 mb-4 group-hover:text-white transition-colors"></i>
                <h2 class="text-2xl font-bold mb-2">Mode Latihan</h2>
                <p class="text-sm opacity-70">60+ Soal dengan pembahasan langsung.</p>
            </div>

            <div onclick="showMode('exam')" class="btn-mode glass-panel p-8 text-center cursor-pointer group">
                <i class="fas fa-graduation-cap text-5xl text-yellow-400 mb-4 group-hover:text-white transition-colors"></i>
                <h2 class="text-2xl font-bold mb-2">Mode Ujian</h2>
                <p class="text-sm opacity-70">Simulasi ujian akhir dengan skor.</p>
            </div>
        </div>

        <!-- Content Area -->
        <div id="content-area" class="hidden glass-panel p-6 md:p-8 min-h-[500px]">
            <button onclick="returnToMenu()" class="mb-6 px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 transition flex items-center gap-2 text-sm">
                <i class="fas fa-arrow-left"></i> Kembali ke Menu
            </button>

            <!-- Summary Content -->
            <div id="summary-content" class="hidden space-y-8 text-justify">
                <!-- Content injected via JS -->
            </div>

            <!-- Flashcard Content -->
            <div id="flashcard-content" class="hidden flex flex-col items-center">
                <div class="w-full text-right mb-4">
                    <span id="fc-counter" class="text-pink-300 font-mono">1/10</span>
                </div>
                <div class="flashcard-container w-full max-w-md" onclick="flipCard()">
                    <div id="flashcard-el" class="flashcard">
                        <div class="flashcard-face flashcard-front">
                            <h3 id="fc-question" class="text-xl font-bold">Pertanyaan</h3>
                            <p class="absolute bottom-4 text-xs opacity-50">(Klik untuk membalik)</p>
                        </div>
                        <div class="flashcard-face flashcard-back">
                            <p id="fc-answer" class="text-lg">Jawaban</p>
                        </div>
                    </div>
                </div>
                <div class="flex gap-4 mt-8">
                    <button onclick="prevFlashcard()" class="px-6 py-2 bg-pink-700 rounded-lg hover:bg-pink-600 transition"><i class="fas fa-chevron-left"></i> Sebelumnya</button>
                    <button onclick="nextFlashcard()" class="px-6 py-2 bg-purple-700 rounded-lg hover:bg-purple-600 transition">Selanjutnya <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- Quiz/Exam Interface -->
            <div id="quiz-interface" class="hidden">
                <div class="flex justify-between items-center mb-6 border-b border-white/10 pb-4">
                    <h2 id="quiz-title" class="text-2xl font-bold text-pink-400">Mode Latihan</h2>
                    <span id="quiz-progress" class="font-mono text-lg bg-black/30 px-3 py-1 rounded">1/60</span>
                </div>
                
                <div class="mb-8">
                    <p id="quiz-question" class="text-xl md:text-2xl font-medium leading-relaxed">Loading...</p>
                </div>

                <div id="quiz-options" class="space-y-3 mb-6">
                    <!-- Options injected here -->
                </div>

                <!-- Explanation Box (Only for Practice Mode) -->
                <div id="explanation-box" class="hidden mt-6 p-4 rounded-lg bg-blue-900/40 border border-blue-500/30">
                    <h4 class="text-blue-300 font-bold mb-2"><i class="fas fa-info-circle"></i> Penjelasan:</h4>
                    <p id="explanation-text" class="text-sm opacity-90"></p>
                </div>

                <div class="flex justify-end mt-6">
                    <button id="next-btn" onclick="nextQuestion()" class="hidden px-8 py-3 bg-gradient-to-r from-pink-600 to-purple-600 rounded-lg font-bold hover:shadow-lg hover:from-pink-500 hover:to-purple-500 transition">
                        Selanjutnya <i class="fas fa-arrow-right ml-2"></i>
                    </button>
                    <button id="finish-btn" onclick="finishExam()" class="hidden px-8 py-3 bg-green-600 rounded-lg font-bold hover:bg-green-500 transition">
                        Selesai <i class="fas fa-check ml-2"></i>
                    </button>
                </div>
            </div>

            <!-- Result Interface -->
            <div id="result-interface" class="hidden text-center py-10">
                <div class="text-6xl mb-4" id="result-emoji">ðŸ¤”</div>
                <h2 class="text-3xl font-bold mb-2">Skor Kamu</h2>
                <div class="text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400 mb-6" id="result-score">0</div>
                <p id="result-message" class="text-xl mb-8 italic">Pesan...</p>
                <button onclick="returnToMenu()" class="px-8 py-3 bg-white/10 border border-white/20 rounded-full hover:bg-white/20 transition">
                    Kembali ke Menu Utama
                </button>
            </div>
        </div>

    </div>

    <script>
        // --- DATA SOURCE (With SVG Illustrations) ---
        const summaryData = [
            {
                title: "1. Sistem Integumentum",
                visual: `
                    <svg class="illustration-svg" viewBox="0 0 400 250" xmlns="http://www.w3.org/2000/svg">
                        <!-- Skin Layers -->
                        <rect x="50" y="20" width="300" height="40" fill="#f8b090" stroke="white" />
                        <text x="200" y="45" text-anchor="middle" class="svg-label" fill="#333">Epidermis (Melanosit)</text>
                        
                        <path d="M50 60 Q 100 80, 150 60 T 250 60 T 350 60 V 160 H 50 V 60" fill="#e08e79" stroke="white"/>
                        <text x="200" y="110" text-anchor="middle" class="svg-label" fill="white">Dermis (Pembuluh Darah, Saraf)</text>
                        
                        <!-- Sweat Gland -->
                        <path d="M 80 60 C 80 100, 60 140, 70 150 C 80 160, 90 140, 80 60" stroke="#88ccff" stroke-width="3" fill="none"/>
                        <circle cx="75" cy="150" r="10" fill="#88ccff" opacity="0.6"/>
                        <text x="80" y="180" text-anchor="middle" class="svg-text">Kelenjar Keringat</text>
                        
                        <!-- Hypodermis -->
                        <rect x="50" y="160" width="300" height="50" fill="#ffd700" opacity="0.5" stroke="white"/>
                        <circle cx="70" cy="185" r="15" fill="#e6c200" opacity="0.5"/>
                        <circle cx="110" cy="185" r="15" fill="#e6c200" opacity="0.5"/>
                        <circle cx="150" cy="185" r="15" fill="#e6c200" opacity="0.5"/>
                        <text x="250" y="190" text-anchor="middle" class="svg-label" fill="white">Hipodermis (Lemak)</text>
                    </svg>
                `,
                content: `
                    <ul class="list-disc pl-5 space-y-2">
                        <li><strong>Komponen:</strong> Kulit (Epidermis, Dermis, Hipodermis) dan Struktur Aksesoris (Rambut, Kuku, Kelenjar).</li>
                        <li><strong>Fungsi Utama:</strong> Proteksi (air, patogen), Pengaturan suhu (termoregulasi), Sensasi, Sintesis Vitamin D, Ekskresi.</li>
                        <li><strong>Mekanisme Keringat:</strong> Melibatkan pompa Na+/K+ ATPase. Sel sekretoris mereabsorpsi Na+ dan Cl-, air masuk secara osmosis. Keringat awal bersifat isotonik/hipotonik, namun reabsorpsi elektrolit di duktus membuatnya lebih hipotonik saat keluar.</li>
                        <li><strong>Perpindahan Panas:</strong> Radiasi (gelombang panas), Konduksi (kontak langsung), Konveksi (arus udara), Evaporasi (penguapan keringat).</li>
                        <li><strong>Warna Kulit:</strong> Ditentukan oleh melanin, karoten, dan hemoglobin. Melanosit memproduksi melanin untuk perlindungan UV.</li>
                    </ul>
                `
            },
            {
                title: "2. Fisiologi Tulang (Penyembuhan Fraktur)",
                visual: `
                    <svg class="illustration-svg" viewBox="0 0 400 150" xmlns="http://www.w3.org/2000/svg">
                        <!-- Bone 1 Broken -->
                        <path d="M50 60 L120 60 L130 50 L120 40 L50 40 Z" fill="#ddd" stroke="white"/>
                        <path d="M140 60 L210 60 L210 40 L140 40 L130 50 Z" fill="#ddd" stroke="white"/>
                        <text x="130" y="30" text-anchor="middle" class="svg-text">1. Hematoma</text>
                        <circle cx="130" cy="50" r="12" fill="red" opacity="0.7"/>

                        <!-- Bone 2 Callus -->
                        <path d="M250 60 L320 60 L330 50 L320 40 L250 40 Z" fill="#ddd" stroke="white"/>
                        <path d="M340 60 L410 60 L410 40 L340 40 L330 50 Z" fill="#ddd" stroke="white"/>
                        <ellipse cx="330" cy="50" rx="20" ry="15" fill="#88ff88" opacity="0.6"/>
                        <text x="330" y="85" text-anchor="middle" class="svg-text">2. Kalus Fibrokartilago</text>
                        <text x="330" y="100" text-anchor="middle" class="svg-text">(Osteoblas Aktif)</text>
                    </svg>
                `,
                content: `
                    <ul class="list-disc pl-5 space-y-2">
                        <li><strong>Fungsi:</strong> Alat gerak pasif, metabolisme Kalsium, hematopoiesis (pembentukan sel darah), proteksi.</li>
                        <li><strong>Klasifikasi Bentuk:</strong> Panjang (Humerus), Pendek (Carpal), Pipih (Parietal), Ireguler (Vertebra), Sesamoid (Patella).</li>
                        <li><strong>Sel Tulang:</strong> Osteoblas (pembentuk), Osteosit (sel dewasa), Osteoklas (penyerap/penghancur), Osteoprogenitor (sel induk).</li>
                        <li><strong>Penyembuhan Fraktur (Lihat Gambar):</strong> 
                            <ol class="list-decimal pl-5 mt-1">
                                <li>Pembentukan Hematoma (pendarahan).</li>
                                <li>Pembentukan Kalus (fibrokartilago).</li>
                                <li>Osifikasi Kalus (tulang spongiosa).</li>
                                <li>Remodeling (oleh osteoklas dan osteoblas).</li>
                            </ol>
                        </li>
                    </ul>
                `
            },
            {
                title: "3. Fisiologi Sendi (Sinovial)",
                visual: `
                    <svg class="illustration-svg" viewBox="0 0 400 200" xmlns="http://www.w3.org/2000/svg">
                        <!-- Bone Top -->
                        <path d="M150 10 Q 200 60, 250 10 V 80 Q 200 100, 150 80 Z" fill="#ddd" stroke="white"/>
                        <!-- Bone Bottom -->
                        <path d="M150 190 Q 200 140, 250 190 V 120 Q 200 100, 150 120 Z" fill="#ddd" stroke="white"/>
                        
                        <!-- Articular Cartilage -->
                        <path d="M150 80 Q 200 100, 250 80" fill="none" stroke="#88ccff" stroke-width="5"/>
                        <path d="M150 120 Q 200 100, 250 120" fill="none" stroke="#88ccff" stroke-width="5"/>
                        
                        <!-- Capsule -->
                        <path d="M150 80 Q 120 100, 150 120" fill="none" stroke="#ff00ff" stroke-width="2" stroke-dasharray="4"/>
                        <path d="M250 80 Q 280 100, 250 120" fill="none" stroke="#ff00ff" stroke-width="2" stroke-dasharray="4"/>
                        
                        <!-- Labels -->
                        <text x="290" y="105" class="svg-label" fill="white">Cairan Sinovial</text>
                        <text x="60" y="90" class="svg-text" fill="white">Kartilago Artikular</text>
                        <line x1="100" y1="90" x2="160" y2="85" stroke="white" />
                        <text x="200" y="150" text-anchor="middle" class="svg-text">Rongga Sendi</text>
                    </svg>
                `,
                content: `
                    <ul class="list-disc pl-5 space-y-2">
                        <li><strong>Sinartrosis:</strong> Sendi mati (contoh: Sutura kranial).</li>
                        <li><strong>Amfiartrosis:</strong> Gerak terbatas (contoh: Simfisis pubis, cakram intervertebra).</li>
                        <li><strong>Diartrosis (Sinovial):</strong> Gerak bebas. Memiliki kapsul sendi, cairan sinovial, kartilago hialin (seperti ilustrasi).</li>
                        <li><strong>Gerakan Angular:</strong> Fleksi (tekuk), Ekstensi (lurus), Abduksi (menjauhi tubuh), Adduksi (mendekati tubuh).</li>
                        <li><strong>Gerakan Khusus:</strong> Supinasi/Pronasi (tangan), Inversi/Eversi (kaki), Elevasi/Depresi (rahang/bahu).</li>
                    </ul>
                `
            },
            {
                title: "4. Otot Jantung & Polos",
                visual: `
                    <svg class="illustration-svg" viewBox="0 0 400 180" xmlns="http://www.w3.org/2000/svg">
                        <!-- Cardiac Muscle Cell -->
                        <rect x="50" y="30" width="100" height="40" rx="5" fill="#d64959" stroke="white"/>
                        <rect x="160" y="30" width="100" height="40" rx="5" fill="#d64959" stroke="white"/>
                        <!-- Intercalated Disc -->
                        <line x1="155" y1="30" x2="155" y2="70" stroke="yellow" stroke-width="4"/>
                        <text x="155" y="20" text-anchor="middle" class="svg-text">Diskus Interkalaris</text>
                        <text x="50" y="90" class="svg-text">Otot Jantung (Bercabang)</text>

                        <!-- Smooth Muscle Cell -->
                        <path d="M50 130 Q 150 110, 250 130 Q 150 150, 50 130 Z" fill="#e08e79" stroke="white"/>
                        <circle cx="150" cy="130" r="5" fill="#552222"/>
                        <text x="280" y="135" class="svg-text">Otot Polos (Gelendong)</text>
                    </svg>
                `,
                content: `
                    <ul class="list-disc pl-5 space-y-2">
                        <li><strong>Otot Jantung:</strong> Memiliki diskus interkalaris (gap junction + desmosom). Potensial aksi memiliki fase <em>Plateau</em> (masuknya Ca2+ lambat) yang mencegah tetanus (kontraksi terus menerus). Sumber Ca2+ dari SR dan ekstraseluler.</li>
                        <li><strong>Otot Polos:</strong> Tidak ada sarkomer/lurik. Menggunakan <em>Calmodulin</em> (bukan troponin) untuk mengikat Ca2+. Memiliki <em>Caveolae</em> sebagai pengganti T-tubule. Mampu berkontraksi dalam rentang panjang yang luas (plastisitas).</li>
                    </ul>
                `
            },
            {
                title: "5. Fisiologi Otot Rangka (Sarkomer)",
                visual: `
                    <svg class="illustration-svg" viewBox="0 0 400 150" xmlns="http://www.w3.org/2000/svg">
                        <!-- Z Lines -->
                        <polyline points="50,20 60,30 50,40 60,50 50,60 60,70 50,80 60,90 50,100" fill="none" stroke="#00ffcc" stroke-width="3"/>
                        <polyline points="350,20 340,30 350,40 340,50 350,60 340,70 350,80 340,90 350,100" fill="none" stroke="#00ffcc" stroke-width="3"/>
                        <text x="50" y="120" class="svg-label" text-anchor="middle">Garis Z</text>
                        <text x="350" y="120" class="svg-label" text-anchor="middle">Garis Z</text>

                        <!-- Actin (Thin) -->
                        <line x1="60" y1="30" x2="150" y2="30" stroke="#88ccff" stroke-width="2"/>
                        <line x1="60" y1="50" x2="150" y2="50" stroke="#88ccff" stroke-width="2"/>
                        <line x1="60" y1="70" x2="150" y2="70" stroke="#88ccff" stroke-width="2"/>

                        <line x1="340" y1="30" x2="250" y2="30" stroke="#88ccff" stroke-width="2"/>
                        <line x1="340" y1="50" x2="250" y2="50" stroke="#88ccff" stroke-width="2"/>
                        <line x1="340" y1="70" x2="250" y2="70" stroke="#88ccff" stroke-width="2"/>

                        <!-- Myosin (Thick) -->
                        <rect x="160" y="25" width="80" height="6" fill="#ff00ff"/>
                        <rect x="160" y="45" width="80" height="6" fill="#ff00ff"/>
                        <rect x="160" y="65" width="80" height="6" fill="#ff00ff"/>

                        <text x="200" y="15" text-anchor="middle" class="svg-text">Miosin (Tebal)</text>
                        <text x="100" y="15" text-anchor="middle" class="svg-text">Aktin (Tipis)</text>
                        <text x="200" y="140" text-anchor="middle" class="svg-label" fill="white">SARKOMER</text>
                    </svg>
                `,
                content: `
                    <ul class="list-disc pl-5 space-y-2">
                        <li><strong>Struktur:</strong> Epimisium (luar), Perimisium (bungkus fasikula), Endomisium (bungkus serat).</li>
                        <li><strong>Sarkomer:</strong> Unit fungsional (lihat gambar). Garis Z (batas), Pita A (gelap, aktin+miosin), Pita I (terang, aktin saja), Zona H (tengah pita A).</li>
                        <li><strong>Kontraksi (Sliding Filament):</strong> Ca2+ berikatan dengan Troponin C -> Tropomiosin bergeser -> Binding site Aktin terbuka -> Kepala Miosin menempel -> Power stroke.</li>
                        <li><strong>Tipe Serabut:</strong>
                            <ul class="list-circle pl-5">
                                <li>Tipe I (Slow Oxidative): Merah, banyak mioglobin, tahan lelah (Maraton).</li>
                                <li>Tipe IIx (Fast Glycolytic): Putih, sedikit mioglobin, cepat lelah, power besar (Sprimt/Angkat beban).</li>
                            </ul>
                        </li>
                    </ul>
                `
            }
        ];

        const flashcardsData = [
            { q: "Apa fungsi melanosit pada epidermis?", a: "Memproduksi melanin untuk melindungi DNA dari radiasi sinar UV." },
            { q: "Sebutkan 4 cara perpindahan panas tubuh!", a: "Radiasi, Konduksi, Konveksi, Evaporasi." },
            { q: "Apa sel yang berfungsi menghancurkan/meresorpsi tulang?", a: "Osteoklas." },
            { q: "Tulang Patella termasuk klasifikasi tulang apa?", a: "Tulang Sesamoid." },
            { q: "Apa nama unit fungsional kontraksi otot rangka?", a: "Sarkomer." },
            { q: "Protein apa yang mengikat Kalsium pada otot polos?", a: "Calmodulin (bukan Troponin)." },
            { q: "Apa fungsi cairan sinovial?", a: "Pelumas sendi, penyerap goncangan, dan nutrisi kondrosit." },
            { q: "Gerakan menjauhi garis tengah tubuh disebut?", a: "Abduksi." },
            { q: "Kenapa otot jantung tidak bisa mengalami tetanus?", a: "Karena periode refrakter absolutnya sangat panjang (hampir sepanjang durasi kontraksi) akibat fase plateau." },
            { q: "Apa itu Sarcopenia?", a: "Penurunan massa dan kekuatan otot terkait penuaan." }
        ];

        const questionsData = [
            // INTEGUMENTUM (12 Soal)
            { q: "Manakah lapisan kulit yang mengandung melanosit?", options: ["Stratum corneum", "Stratum basale", "Dermis papiler", "Hipodermis"], correct: 1, explanation: "Melanosit terletak di lapisan basal (stratum basale) epidermis." },
            { q: "Mekanisme perpindahan panas melalui perubahan cairan menjadi uap disebut...", options: ["Radiasi", "Konduksi", "Konveksi", "Evaporasi"], correct: 3, explanation: "Evaporasi adalah perubahan cairan (keringat) menjadi uap yang menyerap panas tubuh." },
            { q: "Pompa ion utama yang terlibat dalam sekresi keringat adalah...", options: ["Ca2+ ATPase", "H+/K+ ATPase", "Na+/K+ ATPase", "Na+/Ca2+ exchanger"], correct: 2, explanation: "Sekresi keringat melibatkan pompa Na+/K+ ATPase untuk mereabsorpsi Na+ dan Cl-." },
            { q: "Sel epidermis yang berperan dalam sistem imun adalah...", options: ["Keratinosit", "Melanosit", "Sel Langerhans", "Sel Merkel"], correct: 2, explanation: "Sel Langerhans adalah sel dendritik yang berfungsi sebagai bagian dari sistem imun di kulit." },
            { q: "Fungsi Vitamin D yang disintesis di kulit terutama untuk...", options: ["Metabolisme Kalsium", "Produksi Melanin", "Pertumbuhan Rambut", "Ekskresi Urea"], correct: 0, explanation: "Vitamin D esensial untuk penyerapan dan metabolisme kalsium dan fosfat." },
            { q: "Kelenjar sebasea mensekresikan zat berminyak yang disebut...", options: ["Sebum", "Serumen", "Keringat apokrin", "Keringat ekrin"], correct: 0, explanation: "Kelenjar sebasea menghasilkan sebum untuk melumasi kulit dan rambut." },
            { q: "Lapisan kulit yang berisi jaringan lemak (adiposa) adalah...", options: ["Epidermis", "Dermis", "Hipodermis", "Stratum granulosum"], correct: 2, explanation: "Hipodermis (subkutan) kaya akan sel lemak dan pembuluh darah besar." },
            { q: "Apa yang menyebabkan kulit menjadi gelap saat terpapar sinar matahari?", options: ["Peningkatan jumlah melanosit", "Peningkatan aktivitas melanosit memproduksi melanin", "Penebalan dermis", "Pecahnya pembuluh darah"], correct: 1, explanation: "Sinar UV menstimulasi aktivitas melanosit untuk memproduksi lebih banyak melanin (melanogenesis)." },
            { q: "Reseptor tekanan pada kulit terletak di...", options: ["Epidermis", "Dermis", "Rambut", "Kuku"], correct: 1, explanation: "Dermis mengandung berbagai reseptor sensorik, termasuk untuk tekanan." },
            { q: "Keringat yang baru disekresikan oleh kelenjar bersifat...", options: ["Hipertonik", "Hipotonik", "Isotonik", "Sangat asam"], correct: 1, explanation: "Cairan prekursor bersifat isotonik/hipotonik di dalam sel, namun setelah reabsorpsi Na/Cl di duktus, keringat menjadi hipotonik." },
            { q: "Rambut dan kuku merupakan turunan dari lapisan...", options: ["Epidermis", "Dermis", "Hipodermis", "Otot polos"], correct: 0, explanation: "Rambut dan kuku adalah struktur aksesori yang berasal dari epidermis (keratin)." },
            { q: "Konduksi adalah perpindahan panas melalui...", options: ["Gelombang elektromagnetik", "Arus udara", "Kontak langsung", "Penguapan"], correct: 2, explanation: "Konduksi memerlukan kontak fisik langsung antara benda hangat dan dingin." },

            // TULANG (12 Soal)
            { q: "Sel yang berfungsi membentuk matriks tulang baru adalah...", options: ["Osteosit", "Osteoklas", "Osteoblas", "Kondrosit"], correct: 2, explanation: "Osteoblas adalah sel pembentuk tulang (bone forming cells)." },
            { q: "Tulang humerus diklasifikasikan sebagai...", options: ["Tulang pendek", "Tulang panjang", "Tulang pipih", "Tulang ireguler"], correct: 1, explanation: "Humerus (lengan atas) memiliki batang (diafisis) dan ujung (epifisis), ciri tulang panjang." },
            { q: "Tahap pertama penyembuhan fraktur adalah...", options: ["Pembentukan kalus tulang", "Remodeling", "Pembentukan hematoma", "Pembentukan kalus fibrokartilago"], correct: 2, explanation: "Segera setelah patah, terjadi pendarahan yang membentuk hematoma fraktur." },
            { q: "Struktur fungsional pada tulang kompak disebut...", options: ["Trabekula", "Osteon (Sistem Havers)", "Periosteum", "Lakuna"], correct: 1, explanation: "Unit dasar tulang kompak adalah Osteon atau Sistem Havers." },
            { q: "Matriks tulang terutama tersusun atas...", options: ["Serat kolagen dan garam kalsium", "Elastin dan air", "Keratin dan lemak", "Aktin dan miosin"], correct: 0, explanation: "Kekerasan tulang dari kalsium fosfat, kelenturan dari serat kolagen." },
            { q: "Tulang vertebra termasuk dalam klasifikasi...", options: ["Tulang panjang", "Tulang pendek", "Tulang pipih", "Tulang ireguler"], correct: 3, explanation: "Vertebra memiliki bentuk yang kompleks dan tidak beraturan (ireguler)." },
            { q: "Tempat terjadinya pertumbuhan memanjang pada tulang panjang anak-anak adalah...", options: ["Lempeng epifisis", "Rongga medula", "Periosteum", "Kanal Havers"], correct: 0, explanation: "Lempeng epifisis (lempeng pertumbuhan) adalah area kartilago yang memanjang dan mengeras." },
            { q: "Fungsi sumsum tulang merah adalah...", options: ["Menyimpan lemak", "Hematopoiesis (pembentukan darah)", "Menyimpan kalsium", "Membentuk saraf"], correct: 1, explanation: "Sumsum merah adalah tempat produksi sel darah merah, putih, dan trombosit." },
            { q: "Lapisan jaringan ikat yang membungkus permukaan luar tulang adalah...", options: ["Endosteum", "Perimisium", "Periosteum", "Perikardium"], correct: 2, explanation: "Periosteum adalah membran fibrosa yang menutupi tulang kecuali di sendi." },
            { q: "Hormon yang meningkatkan kadar kalsium darah dengan memicu osteoklas adalah...", options: ["Kalsitonin", "Paratiroid Hormon (PTH)", "Hormon Pertumbuhan", "Insulin"], correct: 1, explanation: "PTH merangsang osteoklas untuk melepas kalsium dari tulang ke darah." },
            { q: "Contoh tulang sesamoid adalah...", options: ["Scapula", "Patella", "Sternum", "Femur"], correct: 1, explanation: "Patella (tempurung lutut) adalah tulang sesamoid terbesar yang berkembang di dalam tendon." },
            { q: "Osteoklas berasal dari turunan sel...", options: ["Osteoprogenitor", "Monosit/Makrofag", "Osteoblas", "Fibroblas"], correct: 1, explanation: "Osteoklas berasal dari fusi sel-sel monosit (garis keturunan sel darah putih), bukan dari sel tulang osteoprogenitor." },

            // SENDI (12 Soal)
            { q: "Sendi yang tidak memungkinkan pergerakan sama sekali disebut...", options: ["Diartrosis", "Amfiartrosis", "Sinartrosis", "Sinovial"], correct: 2, explanation: "Sinartrosis adalah sendi mati (immovable joint)." },
            { q: "Cairan sinovial berfungsi untuk...", options: ["Mengikat tulang", "Menghasilkan sel darah", "Melumasi dan memberi nutrisi sendi", "Menghubungkan otot ke tulang"], correct: 2, explanation: "Fungsi utama cairan sinovial adalah lubrikasi dan nutrisi kartilago artikular." },
            { q: "Gerakan menekuk siku sehingga sudut sendi mengecil disebut...", options: ["Ekstensi", "Fleksi", "Abduksi", "Hiperekstensi"], correct: 1, explanation: "Fleksi adalah gerakan yang mengurangi sudut antara dua tulang." },
            { q: "Sutura pada tengkorak adalah contoh sendi...", options: ["Sinartrosis", "Amfiartrosis", "Diartrosis", "Gomphosis"], correct: 0, explanation: "Sutura adalah sendi fibrosa yang tidak bergerak (sinartrosis)." },
            { q: "Gerakan memutar telapak tangan menghadap ke atas disebut...", options: ["Pronasi", "Supinasi", "Inversi", "Eversi"], correct: 1, explanation: "Supinasi (seperti meminta sup) adalah telapak tangan menghadap atas/depan." },
            { q: "Komponen yang menghubungkan tulang dengan tulang pada sendi adalah...", options: ["Tendon", "Ligamen", "Otot", "Bursa"], correct: 1, explanation: "Ligamen adalah jaringan ikat yang menghubungkan tulang ke tulang." },
            { q: "Gerakan kaki dimana telapak kaki menghadap ke dalam disebut...", options: ["Eversi", "Inversi", "Dorsifleksi", "Plantar fleksi"], correct: 1, explanation: "Inversi adalah gerakan memutar telapak kaki ke arah medial (dalam)." },
            { q: "Kantung berisi cairan yang mengurangi gesekan antar struktur sendi disebut...", options: ["Meniskus", "Bursa", "Labrum", "Periosteum"], correct: 1, explanation: "Bursa adalah kantung sinovial kecil yang menjadi bantalan." },
            { q: "Sendi lutut (knee joint) termasuk jenis sendi...", options: ["Sendi Peluru", "Sendi Engsel (Hinge)", "Sendi Putar", "Sendi Pelana"], correct: 1, explanation: "Lutut terutama bekerja sebagai sendi engsel (hinge joint) modifikasi." },
            { q: "Gerakan mengangkat bahu ke atas (mengidik) disebut...", options: ["Depresi", "Elevasi", "Retraksi", "Protraksi"], correct: 1, explanation: "Elevasi adalah gerakan struktur tubuh ke arah superior (atas)." },
            { q: "Symphysis pubis adalah contoh sendi...", options: ["Sinartrosis", "Amfiartrosis", "Diartrosis", "Sinostosis"], correct: 1, explanation: "Symphysis pubis memungkinkan sedikit gerakan (amfiartrosis) terutama saat melahirkan." },
            { q: "Gerakan melingkar yang merupakan gabungan fleksi, ekstensi, abduksi, adduksi adalah...", options: ["Rotasi", "Sirkumduksi", "Supinasi", "Oposisi"], correct: 1, explanation: "Sirkumduksi membuat gerakan membentuk kerucut di ruang." },

            // OTOT JANTUNG & POLOS (12 Soal)
            { q: "Struktur khas yang menghubungkan sel-sel otot jantung adalah...", options: ["Diskus interkalaris", "Motor end plate", "Dense bodies", "Caveolae"], correct: 0, explanation: "Diskus interkalaris mengandung desmosom dan gap junction untuk sinkronisasi." },
            { q: "Apa penyebab fase Plateau pada potensial aksi otot jantung?", options: ["Masuknya Na+ cepat", "Keluarnya K+ cepat", "Masuknya Ca2+ lambat", "Keluarnya Cl-"], correct: 2, explanation: "Fase plateau disebabkan oleh pembukaan kanal Ca2+ lambat (L-type) yang menyeimbangkan aliran keluar K+." },
            { q: "Mengapa otot jantung tidak bisa mengalami tetani?", options: ["Tidak punya aktin", "Periode refrakter absolut sangat panjang", "Kekurangan ATP", "Impuls terlalu lambat"], correct: 1, explanation: "Periode refrakter absolut berlangsung hampir selama kontraksi, mencegah rangsangan baru memicu kejang." },
            { q: "Protein pengikat kalsium pada otot polos adalah...", options: ["Troponin", "Tropomiosin", "Calmodulin", "Kalsequestrin"], correct: 2, explanation: "Otot polos tidak memiliki troponin; Ca2+ berikatan dengan Calmodulin untuk mengaktifkan MLCK." },
            { q: "Struktur pada otot polos yang berfungsi mirip T-tubule adalah...", options: ["Sarkomer", "Caveolae", "Retikulum Sarkoplasma", "Dense bodies"], correct: 1, explanation: "Caveolae adalah lekukan membran sel yang kaya kalsium, menggantikan fungsi T-tubule." },
            { q: "Sumber Kalsium untuk kontraksi otot jantung berasal dari...", options: ["Hanya Retikulum Sarkoplasma", "Hanya Cairan Ekstraseluler", "Retikulum Sarkoplasma dan Cairan Ekstraseluler", "Mitokondria"], correct: 2, explanation: "Berbeda dengan otot rangka, otot jantung butuh Ca2+ ekstraseluler untuk memicu pelepasan Ca2+ dari SR (CICR)." },
            { q: "Otot polos yang unit-unitnya bekerja secara independen (misal di mata) disebut...", options: ["Single-unit smooth muscle", "Multi-unit smooth muscle", "Visceral smooth muscle", "Cardiac muscle"], correct: 1, explanation: "Multi-unit smooth muscle memiliki persarafan sendiri-sendiri (iris mata, otot piloerektor)." },
            { q: "Otot polos dapat meregang jauh tanpa menjadi lembek, sifat ini disebut...", options: ["Kontraktilitas", "Plastisitas", "Elastisitas", "Excitability"], correct: 1, explanation: "Plastisitas memungkinkan organ berongga (seperti kandung kemih) menampung volume besar tanpa tekanan berlebih." },
            { q: "Dense bodies pada otot polos berfungsi sebagai jangkar bagi...", options: ["Filamen tebal", "Filamen tipis (aktin)", "Mitokondria", "Inti sel"], correct: 1, explanation: "Dense bodies adalah analog dari Garis Z pada otot rangka, tempat melekatnya aktin." },
            { q: "Durasi potensial aksi otot jantung ventrikel kira-kira...", options: ["1-2 msec", "10-20 msec", "250-300 msec", "1 detik"], correct: 2, explanation: "Potensial aksi otot jantung jauh lebih lama dibanding otot rangka/saraf." },
            { q: "Pada otot polos, miosin baru bisa berikatan dengan aktin jika...", options: ["Troponin bergeser", "Kepala miosin difosforilasi oleh MLCK", "ATP habis", "Ca2+ dipompa keluar"], correct: 1, explanation: "Kompleks Ca-Calmodulin mengaktifkan Myosin Light Chain Kinase (MLCK) yang memfosforilasi kepala miosin." },
            { q: "Gap junction pada otot jantung berfungsi untuk...", options: ["Mencegah sel terpisah", "Transmisi impuls listrik antar sel", "Menyimpan kalsium", "Menghasilkan energi"], correct: 1, explanation: "Gap junction memungkinkan ion lewat bebas, sehingga jantung berkontraksi sebagai satu unit (syncytium)." },

            // OTOT RANGKA (12 Soal)
            { q: "Unit terkecil kontraksi otot yang dibatasi oleh dua garis Z adalah...", options: ["Miofibril", "Sarkomer", "Fasikula", "Sarkolema"], correct: 1, explanation: "Sarkomer adalah unit fungsional kontraksi otot." },
            { q: "Neurotransmitter yang dilepaskan di sambungan neuromuskular adalah...", options: ["Adrenalin", "Dopamin", "Asetilkolin", "Serotonin"], correct: 2, explanation: "Asetilkolin (ACh) memicu potensial aksi pada serat otot." },
            { q: "Pita terang pada sarkomer yang hanya berisi filamen aktin disebut...", options: ["Pita A", "Pita I", "Zona H", "Garis M"], correct: 1, explanation: "Pita I (Isotropik) hanya mengandung filamen tipis (aktin)." },
            { q: "Ion Kalsium di dalam otot rangka disimpan di...", options: ["T-tubule", "Retikulum Sarkoplasma", "Mitokondria", "Nukleus"], correct: 1, explanation: "Retikulum Sarkoplasma adalah gudang penyimpanan Ca2+." },
            { q: "Peran Kalsium dalam kontraksi otot rangka adalah berikatan dengan...", options: ["Tropomiosin", "Troponin C", "Kepala Miosin", "Aktin"], correct: 1, explanation: "Ca2+ mengikat Troponin, menyebabkan pergeseran Tropomiosin sehingga binding site aktin terbuka." },
            { q: "Lapisan jaringan ikat yang membungkus satu serat otot (muscle fiber) adalah...", options: ["Epimisium", "Perimisium", "Endomisium", "Fascia"], correct: 2, explanation: "Endomisium membungkus individu sel otot/serat otot." },
            { q: "Serabut otot Tipe I (Slow Oxidative) memiliki karakteristik...", options: ["Cepat lelah, warna putih", "Tahan lelah, banyak mioglobin (merah)", "Sedikit mitokondria", "Diameter sangat besar"], correct: 1, explanation: "Tipe I didesain untuk ketahanan (aerobik), kaya mioglobin dan mitokondria." },
            { q: "Teori pergeseran filamen (Sliding Filament Theory) menyatakan bahwa saat kontraksi...", options: ["Filamen aktin dan miosin memendek", "Sarkomer memanjang", "Filamen aktin meluncur di atas miosin", "Garis Z menjauh"], correct: 2, explanation: "Panjang filamen tetap, mereka hanya saling bergeser (overlap bertambah)." },
            { q: "Fungsi T-tubule (Tubulus Transversal) adalah...", options: ["Menyimpan kalsium", "Menghantarkan potensial aksi ke dalam sel", "Membentuk ATP", "Melumasi serat otot"], correct: 1, explanation: "T-tubule meneruskan impuls listrik dari permukaan sel ke bagian dalam dekat SR." },
            { q: "Energi langsung untuk power stroke kepala miosin berasal dari...", options: ["Glukosa", "Kreatin Fosfat", "Hidrolisis ATP", "Asam Laktat"], correct: 2, explanation: "ATP dipecah menjadi ADP + P di kepala miosin untuk menghasilkan gerakan." },
            { q: "Kondisi kelelahan otot akibat penumpukan asam laktat terjadi pada metabolisme...", options: ["Aerobik", "Anaerobik (Glikolisis)", "Fosforilasi oksidatif", "Lipolisis"], correct: 1, explanation: "Glikolisis anaerob menghasilkan asam laktat sebagai produk sampingan." },
            { q: "Zona H pada sarkomer akan menghilang saat...", options: ["Relaksasi maksimal", "Kontraksi maksimal", "Otot istirahat", "Peregangan"], correct: 1, explanation: "Saat kontraksi penuh, filamen aktin bertemu di tengah, menutup Zona H." }
        ];

        // --- STATE MANAGEMENT ---
        let currentMode = '';
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let flashcardIndex = 0;

        // --- NAVIGATION FUNCTIONS ---
        function showMode(mode) {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('content-area').classList.remove('hidden');
            document.querySelector('header').classList.add('hidden'); // Hide header to save space
            
            // Hide all content blocks
            document.getElementById('summary-content').classList.add('hidden');
            document.getElementById('flashcard-content').classList.add('hidden');
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('result-interface').classList.add('hidden');
            
            currentMode = mode;

            if (mode === 'summary') {
                renderSummary();
                document.getElementById('summary-content').classList.remove('hidden');
            } else if (mode === 'flashcard') {
                flashcardIndex = 0;
                renderFlashcard();
                document.getElementById('flashcard-content').classList.remove('hidden');
                document.getElementById('flashcard-content').classList.add('flex');
            } else if (mode === 'practice' || mode === 'exam') {
                startQuiz(mode);
                document.getElementById('quiz-interface').classList.remove('hidden');
            }
        }

        function returnToMenu() {
            document.getElementById('content-area').classList.add('hidden');
            document.getElementById('main-menu').classList.remove('hidden');
            document.querySelector('header').classList.remove('hidden');
            
            // Reset states
            currentQuestions = [];
            score = 0;
            currentQuestionIndex = 0;
            document.getElementById('finish-btn').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');
        }

        // --- SUMMARY LOGIC ---
        function renderSummary() {
            const container = document.getElementById('summary-content');
            container.innerHTML = summaryData.map(item => `
                <div class="bg-purple-900/40 p-6 rounded-lg border-l-4 border-pink-500">
                    <h3 class="text-xl font-bold text-pink-300 mb-3">${item.title}</h3>
                    ${item.visual ? item.visual : ''}
                    <div class="text-sm md:text-base opacity-90 leading-relaxed">${item.content}</div>
                </div>
            `).join('');
        }

        // --- FLASHCARD LOGIC ---
        function renderFlashcard() {
            const card = flashcardsData[flashcardIndex];
            document.getElementById('fc-question').innerText = card.q;
            document.getElementById('fc-answer').innerText = card.a;
            document.getElementById('fc-counter').innerText = `${flashcardIndex + 1}/${flashcardsData.length}`;
            
            // Reset flip
            document.getElementById('flashcard-el').classList.remove('flipped');
        }

        function flipCard() {
            document.getElementById('flashcard-el').classList.toggle('flipped');
        }

        function nextFlashcard() {
            if (flashcardIndex < flashcardsData.length - 1) {
                flashcardIndex++;
                renderFlashcard();
            }
        }

        function prevFlashcard() {
            if (flashcardIndex > 0) {
                flashcardIndex--;
                renderFlashcard();
            }
        }

        // --- QUIZ & EXAM LOGIC ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startQuiz(mode) {
            // Copy and shuffle questions
            currentQuestions = JSON.parse(JSON.stringify(questionsData)); // Deep copy
            currentQuestions = shuffleArray(currentQuestions);
            
            // Limit questions if needed? No, prompt asked for comprehensive (use all 60)
            
            currentQuestionIndex = 0;
            score = 0;
            
            document.getElementById('quiz-title').innerText = mode === 'practice' ? 'Mode Latihan (Feedback Langsung)' : 'Mode Ujian (Skor Akhir)';
            
            renderQuestion();
        }

        function renderQuestion() {
            const q = currentQuestions[currentQuestionIndex];
            document.getElementById('quiz-question').innerText = q.q;
            document.getElementById('quiz-progress').innerText = `${currentQuestionIndex + 1}/${currentQuestions.length}`;
            
            const optionsHtml = q.options.map((opt, idx) => `
                <button onclick="handleAnswer(${idx}, this)" 
                    class="option-btn w-full text-left p-4 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 transition flex justify-between items-center group">
                    <span>${opt}</span>
                    <i class="status-icon fas hidden"></i>
                </button>
            `).join('');
            
            document.getElementById('quiz-options').innerHTML = optionsHtml;
            document.getElementById('explanation-box').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');
            
            // If last question in exam mode, show finish button logic handles elsewhere
        }

        function handleAnswer(selectedIndex, btnElement) {
            const q = currentQuestions[currentQuestionIndex];
            const buttons = document.querySelectorAll('.option-btn');
            
            // Disable all buttons to prevent double submission
            buttons.forEach(btn => btn.disabled = true);

            if (currentMode === 'practice') {
                // PRACTICE MODE: Immediate Feedback
                document.getElementById('explanation-box').classList.remove('hidden');
                document.getElementById('explanation-text').innerText = q.explanation;
                
                if (selectedIndex === q.correct) {
                    // Correct
                    btnElement.classList.add('bg-green-600/50', 'border-green-400', 'correct-anim');
                    btnElement.querySelector('.status-icon').classList.add('fa-check', 'text-green-400', 'inline-block');
                    btnElement.querySelector('.status-icon').classList.remove('hidden');
                } else {
                    // Wrong
                    btnElement.classList.add('bg-red-600/50', 'border-red-400', 'wrong-anim');
                    btnElement.querySelector('.status-icon').classList.add('fa-times', 'text-red-400', 'inline-block');
                    btnElement.querySelector('.status-icon').classList.remove('hidden');
                    
                    // Highlight correct answer
                    buttons[q.correct].classList.add('bg-green-600/50', 'border-green-400');
                    buttons[q.correct].querySelector('.status-icon').classList.add('fa-check', 'text-green-400', 'inline-block');
                    buttons[q.correct].querySelector('.status-icon').classList.remove('hidden');
                }
            } else {
                // EXAM MODE: No Feedback, just record score
                if (selectedIndex === q.correct) {
                    score++;
                }
                // Visual feedback that selection is made (neutral color)
                btnElement.classList.add('bg-blue-600/50', 'border-blue-400');
            }

            // Show Next/Finish Button
            if (currentQuestionIndex < currentQuestions.length - 1) {
                document.getElementById('next-btn').classList.remove('hidden');
            } else {
                document.getElementById('finish-btn').classList.remove('hidden');
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            renderQuestion();
            document.getElementById('next-btn').classList.add('hidden');
            document.getElementById('finish-btn').classList.add('hidden');
        }

        function finishExam() {
            document.getElementById('quiz-interface').classList.add('hidden');
            document.getElementById('result-interface').classList.remove('hidden');
            
            // Calculate final score
            let finalScore = 0;
            if (currentMode === 'practice') {
                // Practice doesn't really track score in the prompt requirement, but let's show completion
                 document.getElementById('result-score').innerText = "Selesai";
                 document.getElementById('result-message').innerText = "Latihan selesai! Semoga pemahamanmu bertambah.";
                 document.getElementById('result-emoji').innerText = "ðŸ“š";
            } else {
                // Exam Mode Calculation
                finalScore = Math.round((score / currentQuestions.length) * 100);
                document.getElementById('result-score').innerText = finalScore;
                
                let msg = "";
                let emoji = "";
                
                if (finalScore >= 70) {
                    msg = "Selamat kamu sudah paham sejauh ini";
                    emoji = "ðŸ¤©";
                } else if (finalScore >= 40) {
                    msg = "Tingkatin lagi yaa!";
                    emoji = "ðŸ’ª";
                } else {
                    msg = "Kamu harus belajar lagi, jangan main mulu";
                    emoji = "ðŸ—¿"; // Moai or Crying face
                }
                
                document.getElementById('result-message').innerText = msg;
                document.getElementById('result-emoji').innerText = emoji;
            }
        }

    </script>
</body>
</html>
