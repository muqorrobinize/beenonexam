<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis SSP: Serebelum & Medulla Spinalis - 20 Soal</title>
    <!-- Impor Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Impor Google Font (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        /* CSS Kustom - Tema Hijau Hutan (Baru) */
        body {
            font-family: 'Inter', sans-serif;
            /* Palet warna hijau tua */
            background: linear-gradient(135deg, #1d4d4f 0%, #0c3b3e 100%);
            color: #ffffff;
            user-select: none;
            padding: 1rem;
            transition: all 0.2s;
            overflow-y: auto;
        }

        /* Kontainer utama bergaya "glass" */
        .quiz-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 1.5rem;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.15);
            padding: 1.5rem 2rem;
            width: 90%;
            max-width: 800px;
        }

        /* Styling Teks Umum */
        h1, .text-3xl, .text-4xl {
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        p, .text-lg, span { color: #f1faee; }
        
        #progress-text, #score-text, #final-score-text, #flashcard-progress {
            color: #ffffff;
            font-weight: 500;
        }

        /* Tombol aksi (Mulai/Ulangi/Menu) - Aksen Hijau Limau */
        .action-btn {
            font-family: 'Inter', sans-serif;
            text-transform: uppercase;
            background-color: #a7c957; /* Aksen Hijau Limau */
            border: none;
            padding: 0.9rem 1.5rem;
            box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.1);
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            color: #2f3e46; /* Teks abu-abu tua */
            font-weight: 700;
            font-size: 1rem;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            border-radius: 0.75rem;
        }
        .action-btn:hover {
            background-color: #c2e080; /* Hover lebih cerah */
            color: #2f3e46;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px 0 rgba(0, 0, 0, 0.15);
        }
        .action-btn:active {
            box-shadow: none;
            transform: translateY(0px);
        }
        .action-btn:disabled {
            background-color: #888;
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* Tombol kembali ke menu - Hijau Tua */
        .back-to-menu-btn {
            background-color: #386641; /* Hijau Tua */
            color: #ffffff;
            font-size: 0.9rem;
            padding: 0.75rem 1rem;
            font-weight: 600;
        }
        .back-to-menu-btn:hover { background-color: #4b8356; }

        /* Tombol Opsi Jawaban (Frosted Glass) */
        .option-btn {
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: block;
            width: 100%;
            margin-bottom: 1rem;
            text-align: left;
            padding: 1.25rem;
            font-size: 0.9rem;
            line-height: 1.5;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 0.75rem;
        }
        .option-btn:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        /* Style untuk jawaban yg dipilih di Mode Ujian */
        .option-btn.selected {
            background: rgba(167, 201, 87, 0.6); /* Hijau Limau transparan */
            border-color: #a7c957;
        }
        
        /* Status Jawaban (Solid - Hijau/Merah) */
        .option-btn.correct {
            background-color: #6a994e; /* Hijau Sedang */
            color: #ffffff;
            border: none;
        }
        .option-btn.incorrect {
            background-color: #bc4749; /* Merah Bata */
            color: #ffffff;
            border: none;
        }
        .option-btn.disabled { pointer-events: none; }
        
        /* Teks Pertanyaan */
        #question-text {
            font-size: 1.125rem;
            line-height: 1.75;
            min-height: 100px;
            margin-bottom: 2rem;
            color: #ffffff;
            font-weight: 600;
        }

        /* --- Style untuk Flashcard & Penjelasan Latihan --- */
        #flashcard {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-height: 300px;
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.1);
            border-radius: 1rem;
        }
        
        #flashcard-front, #flashcard-back {
            font-size: 1.1rem;
            line-height: 1.7;
            color: #ffffff;
        }
        
        .card-label {
            font-size: 0.75rem;
            color: #f1f1f1;
            margin-bottom: 1rem;
            text-transform: uppercase;
            font-weight: 600;
        }
        
        /* Kontainer untuk penjelasan */
        #flashcard-answer-list, #explanation-container, .review-explanations {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .flashcard-option-detailed {
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            font-size: 0.9rem;
            transition: all 0.2s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .flashcard-option-detailed strong {
            display: block;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 0.25rem;
        }
        .flashcard-option-detailed span {
            font-size: 0.85rem;
            color: #f1faee;
            line-height: 1.5;
        }
        .flashcard-option-detailed.correct {
            background: rgba(106, 153, 78, 0.8); /* Hijau transparan */
            border-color: rgba(255, 255, 255, 0.3);
        }
        .flashcard-option-detailed.correct span { color: #ffffff; }
        .flashcard-option-detailed.incorrect {
            background: rgba(188, 71, 73, 0.7); /* Merah Bata transparan */
            border-color: rgba(255, 255, 255, 0.2);
            opacity: 0.9;
        }
        
        /* Style untuk Layar Review */
        .review-card {
            background: rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .review-question {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        .review-options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        @media (min-width: 768px) {
            .review-options-grid { grid-template-columns: 1fr 1fr; }
        }
        .review-option {
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.9rem;
            border: 1px solid transparent;
        }
        .review-option.neutral {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
            opacity: 0.7;
        }
        .review-option.correct {
            background: #6a994e; /* Hijau Sedang */
            border-color: #6a994e;
            font-weight: 600;
        }
        .review-option.chosen-wrong {
            background: #bc4749; /* Merah Bata */
            border-color: #bc4749;
            font-weight: 600;
            text-decoration: line-through;
        }
        .review-explanations { margin-top: 1.5rem; }
        
        .hidden { display: none; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <!-- 1. Layar Mulai (Pilih Mode) -->
    <div id="start-screen" class="quiz-container text-center">
        <h1 class="text-3xl md:text-4xl mb-6">KUIS SSP: SEREBELUM & MEDULLA SPINALIS</h1>
        <p class="mb-10 text-lg">Materi 4 - 20 SOAL</p>
        <div class="flex flex-col">
            <button id="start-flashcard-btn" class="action-btn">Mode Flashcard</button>
            <button id="start-practice-btn" class="action-btn">Mode Latihan</button>
            <button id="start-exam-btn" class="action-btn">Mode Ujian</button>
        </div>
    </div>

    <!-- 2. Layar Kuis (Latihan & Ujian) (Tersembunyi) -->
    <div id="quiz-screen" class="quiz-container hidden w-full max-w-4xl">
        <!-- Info Progress & Skor -->
        <div class="flex justify-between items-center mb-6">
            <span id="progress-text">Soal 1 / 20</span>
            <span id="score-text">Skor: 0</span>
        </div>
        
        <!-- Area Soal -->
        <div id="question-text">
            Memuat pertanyaan...
        </div>

        <!-- Area Opsi Jawaban -->
        <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- Opsi akan ditambahkan oleh JavaScript -->
        </div>
        
        <!-- Area Penjelasan (Hanya Mode Latihan) -->
        <div id="explanation-container" class="mt-6">
            <!-- Penjelasan akan muncul di sini -->
        </div>
        
        <!-- Tombol Lanjut (Hanya Mode Latihan) -->
        <div class="text-center mt-8">
            <button id="next-question-btn" class="action-btn text-lg hidden">
                Lanjut
            </button>
            <button class="back-to-menu-btn action-btn">Kembali ke Menu</button>
        </div>
    </div>
    
    <!-- 3. Layar Flashcard (Tersembunyi) -->
    <div id="flashcard-screen" class="quiz-container hidden w-full max-w-2xl">
        <!-- Progress Flashcard -->
        <span id="flashcard-progress" class="block text-center mb-6">1 / 20</span>
        
        <!-- Flashcard -->
        <div id="flashcard">
            <div id="flashcard-front">
                <span class="card-label">Istilah / Pertanyaan</span>
                <p>Memuat...</p>
            </div>
            <div id="flashcard-back" class="hidden">
                <span class="card-label">Penjelasan</span>
                <div id="flashcard-answer-list">
                    <!-- Konten diisi secara sinkron -->
                </div>
            </div>
        </div>
        
        <!-- Navigasi Flashcard -->
        <div class="flex justify-between mt-6">
            <button id="flashcard-prev" class="action-btn text-lg">&lt; Prev</button>
            <button id="flashcard-flip" class="action-btn text-lg">Balik</button>
            <button id="flashcard-next" class="action-btn text-lg">Next &gt;</button>
        </div>
        
        <div class="text-center mt-6">
            <button class="back-to-menu-btn action-btn">Kembali ke Menu</button>
        </div>
    </div>


    <!-- 4. Layar Hasil (Tersembunyi) -->
    <div id="result-screen" class="quiz-container text-center hidden">
        <h1 class="text-3xl mb-6">KUIS SELESAI!</h1>
        <p id="final-score-text" class="text-4xl my-10">SKOR ANDA: 0 / 20</p>
        <!-- Tombol Review BARU -->
        <div class="flex flex-col md:flex-row justify-center gap-4">
            <button id="review-button" class="action-btn text-xl hidden">Review Kuis</button>
            <button id="restart-button" class="action-btn text-xl">Ulangi Kuis</button>
        </div>
        <button class="back-to-menu-btn action-btn mt-6">Kembali ke Menu</button>
    </div>
    
    <!-- 5. Layar Review BARU (Tersembunyi) -->
    <div id="review-screen" class="quiz-container hidden w-full max-w-4xl">
        <h1 class="text-3xl mb-6 text-center">Review Kuis Anda</h1>
        
        <!-- Kontainer untuk semua soal review -->
        <div id="review-container" class="flex flex-col gap-6 max-h-[70vh] overflow-y-auto pr-2">
            <!-- Soal review akan di-generate di sini -->
        </div>
        
        <div class="text-center mt-8 flex flex-col md:flex-row justify-center gap-4">
             <button id="restart-from-review" class="action-btn text-xl">Ulangi Kuis</button>
             <button class="back-to-menu-btn action-btn">Kembali ke Menu</button>
        </div>
    </div>

    <script>
        // --- Data Soal (BAGIAN 4: Cerebellum Et Medulla Spinalis) ---
        const questions = [
            { // 1
                question: "Lipatan duramater yang memisahkan lobus occipitalis (serebrum) dari serebelum adalah...",
                options: ["Falx Cerebri", "Tentorium Cerebelli", "Falx Cerebelli", "Diafragma Sellae"],
                correct: "Tentorium Cerebelli",
                explanations: {
                    "Falx Cerebri": "SALAH. Ini memisahkan kedua hemisfer serebri (kanan dan kiri).",
                    "Tentorium Cerebelli": "BENAR. 'Tentorium' berarti tenda. Ini adalah lipatan horizontal yang menutupi serebelum seperti tenda, memisahkannya dari serebrum di atasnya.",
                    "Falx Cerebelli": "SALAH. Ini memisahkan kedua hemisfer serebeli.",
                    "Diafragma Sellae": "SALAH. Ini menutupi kelenjar hipofisis."
                }
            },
            { // 2
                question: "Pola percabangan substansia alba di dalam serebelum yang terlihat seperti pohon kehidupan disebut...",
                options: ["Vermis", "Folia", "Arbor Vitae", "Nukleus Profunda"],
                correct: "Arbor Vitae",
                explanations: {
                    "Vermis": "SALAH. Vermis adalah bagian tengah (garis tengah) yang menyatukan hemisfer serebeli.",
                    "Folia": "SALAH. Folia adalah lipatan-lipatan kecil di permukaan (korteks) serebelum.",
                    "Arbor Vitae": "BENAR. Ini adalah istilah Latin untuk 'Pohon Kehidupan', yang menggambarkan pola substansia alba internal serebelum.",
                    "Nukleus Profunda": "SALAH. Ini adalah kumpulan substansia grisea (badan sel) di dalam substansia alba, bukan polanya."
                }
            },
            { // 3
                question: "Fungsi utama Serebelum adalah...",
                options: ["Memulai (menginisiasi) gerakan sadar", "Membandingkan rencana gerakan dengan pelaksanaannya (fine-tuning)", "Menerima sensasi nyeri dan suhu", "Menjaga kesadaran (ARAS)"],
                correct: "Membandingkan rencana gerakan dengan pelaksanaannya (fine-tuning)",
                explanations: {
                    "Memulai (menginisiasi) gerakan sadar": "SALAH. Gerakan diinisiasi oleh korteks motorik primer (serebrum).",
                    "Membandingkan rencana gerakan dengan pelaksanaannya (fine-tuning)": "BENAR. Serebelum menerima salinan 'rencana' dari korteks motorik dan 'feedback' dari proprioseptor, lalu mengirimkan koreksi untuk koordinasi, keseimbangan, dan kehalusan gerakan.",
                    "Menerima sensasi nyeri dan suhu": "SALAH. Ini adalah fungsi traktus spinothalamicus yang menuju ke thalamus dan korteks sensorik.",
                    "Menjaga kesadaran (ARAS)": "SALAH. Ini adalah fungsi utama Formatio Reticularis di batang otak."
                }
            },
            { // 4
                question: "Pedunculus Cerebellaris Medius adalah yang terbesar dan berfungsi menghubungkan Serebelum dengan...",
                options: ["Mesencephalon", "Pons", "Medulla Oblongata", "Medulla Spinalis"],
                correct: "Pons",
                explanations: {
                    "Mesencephalon": "SALAH. Serebelum terhubung ke mesencephalon melalui Pedunculus Superior.",
                    "Pons": "BENAR. Pedunculus medius (tengah) adalah yang terbesar dan membawa input masif dari korteks serebri (yang di-relay di pons) ke serebelum.",
                    "Medulla Oblongata": "SALAH. Serebelum terhubung ke medula oblongata melalui Pedunculus Inferior.",
                    "Medulla Spinalis": "SALAH. Koneksi ke medula spinalis adalah melalui pedunculus inferior (via medula oblongata)."
                }
            },
            { // 5
                question: "Terdapat berapa pasang saraf spinal servikal (leher)?",
                options: ["7 pasang (C1-C7)", "8 pasang (C1-C8)", "12 pasang (T1-T12)", "5 pasang (L1-L5)"],
                correct: "8 pasang (C1-C8)",
                explanations: {
                    "7 pasang (C1-C7)": "SALAH. Meskipun hanya ada 7 vertebra servikal (tulang), terdapat 8 pasang saraf.",
                    "8 pasang (C1-C8)": "BENAR. Ini adalah pengecualian. Saraf C1 keluar di atas vertebra C1, dan C8 keluar di bawah vertebra C7 (di atas T1).",
                    "12 pasang (T1-T12)": "SALAH. Ini adalah jumlah saraf torakal.",
                    "5 pasang (L1-L5)": "SALAH. Ini adalah jumlah saraf lumbal."
                }
            },
            { // 6
                question: "Pada orang dewasa, struktur kerucut ujung dari medulla spinalis (Conus Medullaris) berakhir di level...",
                options: ["Sama panjang dengan tulang ekor (koksiks)", "Sekitar vertebra L5", "Sekitar vertebra L1-L2", "Sekitar vertebra T10"],
                correct: "Sekitar vertebra L1-L2",
                explanations: {
                    "Sama panjang dengan tulang ekor (koksiks)": "SALAH. Ini hanya terjadi pada embrio awal. Tulang belakang tumbuh lebih cepat daripada medula spinalis.",
                    "Sekitar vertebra L5": "SALAH. Ini terlalu rendah. Level ini sudah berisi Cauda Equina.",
                    "Sekitar vertebra L1-L2": "BENAR. Medulla spinalis dewasa jauh lebih pendek daripada kanalis vertebralis dan berakhir di L1/L2.",
                    "Sekitar vertebra T10": "SALAH. Ini sedikit terlalu tinggi."
                }
            },
            { // 7
                question: "Kumpulan akar saraf lumbal dan sakral yang menjulur ke bawah di bawah Conus Medullaris disebut...",
                options: ["Filum Terminale", "Cauda Equina", "Ligamentum Denticulatum", "Intumescentia Lumbalis"],
                correct: "Cauda Equina",
                explanations: {
                    "Filum Terminale": "SALAH. Ini adalah seutas piamater yang menjangkar conus medullaris ke koksiks.",
                    "Cauda Equina": "BENAR. 'Ekor Kuda' dalam bahasa Latin, ini adalah kumpulan akar saraf L3-Co1 yang harus turun sebelum keluar dari foramen yang sesuai.",
                    "Ligamentum Denticulatum": "SALAH. Ini adalah penjangkar lateral dari piamater.",
                    "Intumescentia Lumbalis": "SALAH. Ini adalah penebalan pada medula spinalis, tempat akar-akar ini berasal."
                }
            },
            { // 8
                question: "Struktur piamater yang menjangkar medulla spinalis secara lateral (ke samping) ke duramater adalah...",
                options: ["Filum Terminale", "Cauda Equina", "Ligamentum Denticulatum", "Conus Medullaris"],
                correct: "Ligamentum Denticulatum",
                explanations: {
                    "Filum Terminale": "SALAH. Ini menjangkar ke bawah (inferior).",
                    "Cauda Equina": "SALAH. Ini adalah kumpulan akar saraf.",
                    "Ligamentum Denticulatum": "BENAR. Ini adalah ekstensi piamater berbentuk gigi/segitiga yang menembus arachnoidea dan menempel pada duramater, menstabilkan medula spinalis dari sisi ke sisi.",
                    "Conus Medullaris": "SALAH. Ini adalah ujung dari medula spinalis."
                }
            },
            { // 9
                question: "Prosedur Pungsi Lumbal (Spinal Tap) dilakukan dengan memasukkan jarum ke...",
                options: ["Ruang Epidural (di atas duramater)", "Ruang Subarachnoid (di bawah arachnoidea)", "Ruang Subdural (di bawah duramater)", "Kanalis Sentralis (di tengah medula spinalis)"],
                correct: "Ruang Subarachnoid (di bawah arachnoidea)",
                explanations: {
                    "Ruang Epidural (di atas duramater)": "SALAH. Memasukkan jarum ke sini adalah untuk anestesi epidural, bukan mengambil LCS.",
                    "Ruang Subarachnoid (di bawah arachnoidea)": "BENAR. Ruang subarachnoid adalah tempat LCS bersirkulasi. Jarum dimasukkan di L3/L4 atau L4/L5 untuk mengambil sampel LCS.",
                    "Ruang Subdural (di bawah duramater)": "SALAH. Ini adalah ruang potensial, bukan target untuk mengambil LCS.",
                    "Kanalis Sentralis (di tengah medula spinalis)": "SALAH. Menusuk medula spinalis (di kanalis sentralis) sangat berbahaya dan harus dihindari."
                }
            },
            { // 10
                question: "Mengapa Pungsi Lumbal aman dilakukan di level L3/L4 atau L4/L5?",
                options: ["Karena medula spinalis paling tebal di level tersebut", "Karena tidak ada LCS di level tersebut", "Karena medula spinalis (Conus Medullaris) sudah berakhir di L1/L2", "Karena duramater paling tipis di level tersebut"],
                correct: "Karena medula spinalis (Conus Medullaris) sudah berakhir di L1/L2",
                explanations: {
                    "Karena medula spinalis paling tebal di level tersebut": "SALAH. Medula spinalis sudah berakhir.",
                    "Karena tidak ada LCS di level tersebut": "SALAH. Ruang subarachnoid berisi LCS sampai ke S2.",
                    "Karena medula spinalis (Conus Medullaris) sudah berakhir di L1/L2": "BENAR. Karena medula spinalis padat sudah berakhir, jarum hanya akan mengenai serabut cauda equina yang 'mengambang' di LCS dan tidak berisiko mencederai jaringan SSP padat.",
                    "Karena duramater paling tipis di level tersebut": "SALAH. Keamanan prosedur ini terkait dengan lokasi medula spinalis, bukan ketebalan duramater."
                }
            },
            { // 11
                question: "Pada substansia grisea medula spinalis, badan sel neuron SENSORIK (interneuron) terletak di...",
                options: ["Kornu Anterior (Ventral)", "Kornu Posterior (Dorsal)", "Kornu Lateralis", "Kanalis Sentralis"],
                correct: "Kornu Posterior (Dorsal)",
                explanations: {
                    "Kornu Anterior (Ventral)": "SALAH. Ini berisi badan sel motorik somatik (LMN).",
                    "Kornu Posterior (Dorsal)": "BENAR. Kornu posterior adalah tempat serabut sensorik dari ganglion radiks dorsalis bersinaps dengan interneuron atau neuron jaras asenden.",
                    "Kornu Lateralis": "SALAH. Ini berisi badan sel motorik otonom (simpatik).",
                    "Kanalis Sentralis": "SALAH. Ini adalah saluran LCS."
                }
            },
            { // 12
                question: "Badan sel neuron motorik somatik (Lower Motor Neurons / LMN) terletak di...",
                options: ["Kornu Anterior (Ventral)", "Kornu Posterior (Dorsal)", "Kornu Lateralis", "Ganglion Radiks Dorsalis"],
                correct: "Kornu Anterior (Ventral)",
                explanations: {
                    "Kornu Anterior (Ventral)": "BENAR. Ini adalah 'Final Common Pathway' tempat badan sel LMN berada, yang mengirimkan akson ke otot rangka.",
                    "Kornu Posterior (Dorsal)": "SALAH. Ini untuk fungsi sensorik.",
                    "Kornu Lateralis": "SALAH. Ini untuk fungsi otonom simpatik.",
                    "Ganglion Radiks Dorsalis": "SALAH. Ini berisi badan sel sensorik, bukan motorik."
                }
            },
            { // 13
                question: "Kornu Lateralis hanya ditemukan di segmen medula spinalis T1-L2 dan berisi badan sel...",
                options: ["Neuron sensorik nyeri", "Neuron motorik somatik", "Neuron otonom simpatik preganglionik", "Neuron otonom parasimpatik preganglionik"],
                correct: "Neuron otonom simpatik preganglionik",
                explanations: {
                    "Neuron sensorik nyeri": "SALAH. Ini bersinaps di Kornu Posterior.",
                    "Neuron motorik somatik": "SALAH. Ini ada di Kornu Anterior.",
                    "Neuron otonom simpatik preganglionik": "BENAR. Kornu lateralis adalah pusat asal dari sistem saraf simpatik (Sistem Torakolumbal).",
                    "Neuron otonom parasimpatik preganglionik": "SALAH. Ini berasal dari batang otak (Kranial) dan segmen sakral (S2-S4), bukan T1-L2."
                }
            },
            { // 14
                question: "Jaras asenden yang membawa sensasi nyeri dan suhu ke otak adalah...",
                options: ["Traktus Corticospinalis", "Kolumna Posterior (Gracilis & Cuneatus)", "Traktus Spinothalamicus Lateralis", "Traktus Spinocerebellaris"],
                correct: "Traktus Spinothalamicus Lateralis",
                explanations: {
                    "Traktus Corticospinalis": "SALAH. Ini adalah jaras desenden (motorik).",
                    "Kolumna Posterior (Gracilis & Cuneatus)": "SALAH. Ini membawa raba halus, vibrasi, dan propriosepsi sadar.",
                    "Traktus Spinothalamicus Lateralis": "BENAR. Jaras ini (di kolumna lateralis/anterior) spesifik untuk membawa informasi nosiseptif (nyeri) dan suhu.",
                    "Traktus Spinocerebellaris": "SALAH. Ini membawa propriosepsi tidak sadar ke serebelum."
                }
            },
            { // 15
                question: "Sensasi rabaan halus, vibrasi, dan propriosepsi yang DISADARI dibawa oleh...",
                options: ["Traktus Corticospinalis", "Kolumna Posterior (Gracilis & Cuneatus)", "Traktus Spinothalamicus", "Traktus Spinocerebellaris"],
                correct: "Kolumna Posterior (Gracilis & Cuneatus)",
                explanations: {
                    "Traktus Corticospinalis": "SALAH. Ini adalah jaras motorik.",
                    "Kolumna Posterior (Gracilis & Cuneatus)": "BENAR. Jaras ini (disebut juga sistem lemniskus medial) spesifik untuk modalitas sensorik diskriminatif (raba halus, getar, posisi sendi).",
                    "Traktus Spinothalamicus": "SALAH. Ini untuk nyeri, suhu, dan rabaan kasar.",
                    "Traktus Spinocerebellaris": "SALAH. Ini membawa propriosepsi, tetapi ke serebelum (tidak disadari)."
                }
            },
            { // 16
                question: "Informasi proprioseptif (posisi sendi/otot) yang TIDAK DISADARI, yang digunakan untuk koordinasi, dikirim ke serebelum melalui...",
                options: ["Traktus Corticospinalis", "Kolumna Posterior", "Traktus Spinothalamicus", "Traktus Spinocerebellaris"],
                correct: "Traktus Spinocerebellaris",
                explanations: {
                    "Traktus Corticospinalis": "SALAH. Jaras motorik.",
                    "Kolumna Posterior": "SALAH. Membawa propriosepsi yang disadari (ke korteks).",
                    "Traktus Spinothalamicus": "SALAH. Jaras nyeri dan suhu.",
                    "Traktus Spinocerebellaris": "BENAR. Jaras ini ('Spino' ke 'Cerebellar') mengirimkan feedback posisi tubuh secara cepat dan tidak sadar langsung ke serebelum untuk koreksi motorik."
                }
            },
            { // 17
                question: "Traktus Corticospinalis (Piramidalis) adalah jaras motorik utama yang berasal dari...",
                options: ["Serebelum", "Batang Otak", "Korteks Motorik Primer (Serebrum)", "Medulla Spinalis"],
                correct: "Korteks Motorik Primer (Serebrum)",
                explanations: {
                    "Serebelum": "SALAH. Serebelum memodulasi gerakan, tetapi tidak memulai jaras kortikospinal.",
                    "Batang Otak": "SALAH. Batang otak adalah asal jaras Ekstrapiramidal (misal: Vestibulospinalis).",
                    "Korteks Motorik Primer (Serebrum)": "BENAR. Ini adalah jaras motorik volunter (sadar) utama, berisi Upper Motor Neurons (UMN) yang berasal dari korteks serebri.",
                    "Medulla Spinalis": "SALAH. Jaras ini berakhir di medula spinalis, bukan berasal darinya."
                }
            },
            { // 18
                question: "Decussatio Pyramidalis, tempat sebagian besar serabut Traktus Corticospinalis menyilang, terjadi di...",
                options: ["Mesencephalon", "Pons", "Medulla Oblongata (bagian bawah)", "Capsula Interna"],
                correct: "Medulla Oblongata (bagian bawah)",
                explanations: {
                    "Mesencephalon": "SALAH. Di sini, jaras ini berjalan di Crus Cerebri.",
                    "Pons": "SALAH. Jaras ini berjalan melalui pons.",
                    "Medulla Oblongata (bagian bawah)": "BENAR. Traktus ini membentuk Pyramis (Piramida) di medula, dan 85-90% serabutnya menyilang (decussatio) di bagian kaudal medula oblongata.",
                    "Capsula Interna": "SALAH. Penyilangan terjadi jauh di bawah kapsula interna."
                }
            },
            { // 19
                question: "Jaras desenden (motorik) manakah yang diklasifikasikan sebagai bagian dari Sistem Ekstrapiramidal dan sangat penting untuk menjaga postur dan keseimbangan?",
                options: ["Traktus Corticospinalis Lateralis", "Traktus Corticospinalis Anterior", "Traktus Vestibulospinalis", "Traktus Spinothalamicus"],
                correct: "Traktus Vestibulospinalis",
                explanations: {
                    "Traktus Corticospinalis Lateralis": "SALAH. Ini adalah sistem Piramidal untuk gerakan terampil anggota gerak.",
                    "Traktus Corticospinalis Anterior": "SALAH. Ini adalah sistem Piramidal untuk postur (namun Vestibulospinalis lebih utama untuk refleks keseimbangan).",
                    "Traktus Vestibulospinalis": "BENAR. Jaras ini berasal dari nukleus vestibular (input keseimbangan) di batang otak dan berfungsi secara refleks (ekstrapiramidal) untuk mengontrol otot postur agar tubuh tetap tegak.",
                    "Traktus Spinothalamicus": "SALAH. Ini adalah jaras asenden (sensorik)."
                }
            },
            { // 20
                question: "Neuron di Kornu Anterior yang aksonnya keluar untuk menginervasi otot rangka disebut sebagai 'Final Common Pathway' atau...",
                options: ["Upper Motor Neuron (UMN)", "Lower Motor Neuron (LMN)", "Neuron Sensorik Primer", "Interneuron"],
                correct: "Lower Motor Neuron (LMN)",
                explanations: {
                    "Upper Motor Neuron (UMN)": "SALAH. UMN adalah neuron di korteks (misal: traktus kortikospinalis) yang mengirim perintah ke LMN.",
                    "Lower Motor Neuron (LMN)": "BENAR. LMN (di kornu anterior) adalah neuron terakhir dalam rantai komando motorik. Semua sinyal (dari UMN, refleks, dll) harus melalui LMN untuk bisa menyebabkan kontraksi otot.",
                    "Neuron Sensorik Primer": "SALAH. Ini adalah neuron sensorik.",
                    "Interneuron": "SALAH. Interneuron adalah penghubung, LMN adalah output motorik."
                }
            }
        ];


        // --- Variabel Status Kuis ---
        let currentQuestionIndex = 0;
        let score = 0;
        const totalQuestions = questions.length;
        let currentMode = 'exam'; // 'exam', 'practice', 'flashcard'
        let currentFlashcardIndex = 0; // Untuk mode flashcard
        let userAnswers = []; // BARU: Untuk menyimpan jawaban mode ujian

        // --- Referensi Elemen DOM ---
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const flashcardScreen = document.getElementById('flashcard-screen');
        const reviewScreen = document.getElementById('review-screen'); // BARU
        
        // Tombol Menu Utama
        const startFlashcardBtn = document.getElementById('start-flashcard-btn');
        const startPracticeBtn = document.getElementById('start-practice-btn');
        const startExamBtn = document.getElementById('start-exam-btn');
        
        // Tombol Hasil
        const restartButton = document.getElementById('restart-button');
        const reviewButton = document.getElementById('review-button'); // BARU
        
        // Elemen Kuis
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressText = document.getElementById('progress-text');
        const scoreText = document.getElementById('score-text');
        const finalScoreText = document.getElementById('final-score-text');
        const nextQuestionButton = document.getElementById('next-question-btn');
        const explanationContainer = document.getElementById('explanation-container');
        
        // Elemen Flashcard
        const flashcard = document.getElementById('flashcard');
        const flashcardFront = document.getElementById('flashcard-front');
        const flashcardBack = document.getElementById('flashcard-back');
        const flashcardAnswerList = document.getElementById('flashcard-answer-list');
        const flashcardProgress = document.getElementById('flashcard-progress');
        const flashcardPrev = document.getElementById('flashcard-prev');
        const flashcardFlip = document.getElementById('flashcard-flip');
        const flashcardNext = document.getElementById('flashcard-next');
        
        // Elemen Review BARU
        const reviewContainer = document.getElementById('review-container');
        const restartFromReviewBtn = document.getElementById('restart-from-review');
        
        // Tombol Kembali ke Menu
        const backToMenuButtons = document.querySelectorAll('.back-to-menu-btn');
        
        // --- Fungsi Navigasi Utama ---

        function showMainMenu() {
            quizScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            flashcardScreen.classList.add('hidden');
            reviewScreen.classList.add('hidden'); // BARU
            startScreen.classList.remove('hidden');
            document.body.classList.add('items-center');
            document.body.classList.remove('pt-10');
        }

        function setBodyActive() {
            document.body.classList.remove('items-center');
            document.body.classList.add('pt-10');
        }

        // --- Logika Mode Flashcard ---

        function startFlashcardMode() {
            currentFlashcardIndex = 0;
            startScreen.classList.add('hidden');
            flashcardScreen.classList.remove('hidden');
            setBodyActive();
            showFlashcard();
        }

        function showFlashcard() {
            const question = questions[currentFlashcardIndex];
            flashcardFront.querySelector('p').innerText = question.question;
            flashcardAnswerList.innerHTML = ''; 
            flashcardFront.classList.remove('hidden');
            flashcardBack.classList.add('hidden');
            flashcardProgress.innerText = `${currentFlashcardIndex + 1} / ${totalQuestions}`;
            flashcardPrev.disabled = currentFlashcardIndex === 0;
            flashcardNext.disabled = currentFlashcardIndex === totalQuestions - 1;
        }

        function flipFlashcard() {
            const isFlippingToBack = flashcardBack.classList.contains('hidden');
            if (isFlippingToBack) {
                const q = questions[currentFlashcardIndex];
                renderFlashcardExplanations(q.explanations, q.correct);
            }
            flashcardFront.classList.toggle('hidden');
            flashcardBack.classList.toggle('hidden');
        }
        
        function renderFlashcardExplanations(explanationsObj, correctTerm) {
            flashcardAnswerList.innerHTML = ''; 
            const sortedTerms = Object.keys(explanationsObj).sort((a, b) => (a === correctTerm ? -1 : b === correctTerm ? 1 : 0));
            sortedTerms.forEach(term => {
                const explanation = explanationsObj[term];
                const isCorrect = (term === correctTerm);
                renderSingleExplanation(term, explanation, isCorrect, flashcardAnswerList);
            });
        }
        
        function prevFlashcard() {
            if (currentFlashcardIndex > 0) {
                currentFlashcardIndex--;
                showFlashcard();
            }
        }

        function nextFlashcard() {
            if (currentFlashcardIndex < totalQuestions - 1) {
                currentFlashcardIndex++;
                showFlashcard();
            }
        }

        // --- Logika Mode Kuis (Latihan & Ujian) ---

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = []; // BARU: Kosongkan riwayat jawaban
            
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            reviewScreen.classList.add('hidden'); // BARU
            quizScreen.classList.remove('hidden');
            nextQuestionButton.classList.add('hidden');
            
            setBodyActive();
            showQuestion();
        }
        
        function startPracticeMode() {
            currentMode = 'practice';
            startQuiz();
        }
        
        function startExamMode() {
            currentMode = 'exam';
            startQuiz();
        }

        function showQuestion() {
            optionsContainer.innerHTML = '';
            explanationContainer.innerHTML = ''; 
            nextQuestionButton.classList.add('hidden');
            
            const question = questions[currentQuestionIndex];
            questionText.innerText = question.question;
            progressText.innerText = `Soal ${currentQuestionIndex + 1} / ${totalQuestions}`;
            
            // Mode Latihan menunjukkan skor real-time, Mode Ujian tidak
            if (currentMode === 'practice') {
                 scoreText.innerText = `Skor: ${score}`;
            } else {
                 scoreText.innerText = `Skor: -`;
            }
            
            // Opsi tidak di-shuffle agar konsisten dengan penjelasan (opsional, tapi lebih mudah di-debug)
            // const shuffledOptions = [...question.options].sort(() => Math.random() - 0.5);
            const options = question.options;

            options.forEach(option => {
                const button = document.createElement('button');
                button.innerText = option;
                button.classList.add('option-btn');
                button.addEventListener('click', () => selectAnswer(option, button));
                optionsContainer.appendChild(button);
            });
        }

        function selectAnswer(selectedOption, buttonEl) {
            const correctAnwer = questions[currentQuestionIndex].correct;

            // Nonaktifkan semua tombol opsi
            const optionButtons = optionsContainer.querySelectorAll('.option-btn');
            optionButtons.forEach(btn => btn.classList.add('disabled'));
            
            // Simpan jawaban (untuk kedua mode)
            userAnswers[currentQuestionIndex] = {
                chosen: selectedOption,
                correct: correctAnwer,
                isCorrect: selectedOption === correctAnwer
            };

            // Logika lanjut berdasarkan mode
            if (currentMode === 'practice') {
                // --- MODE LATIHAN ---
                if (selectedOption === correctAnwer) {
                    score++;
                    buttonEl.classList.add('correct');
                } else {
                    buttonEl.classList.add('incorrect');
                    optionButtons.forEach(btn => {
                        if (btn.innerText === correctAnwer) {
                            btn.classList.add('correct');
                        }
                    });
                }
                scoreText.innerText = `Skor: ${score}`;
                nextQuestionButton.classList.remove('hidden');
                renderPracticeExplanation(selectedOption, correctAnwer);
                
            } else {
                // --- MODE UJIAN (LOGIKA BARU) ---
                // 1. Hanya sorot jawaban yang dipilih
                buttonEl.classList.add('selected');
                
                // 2. Tidak ada feedback benar/salah
                
                // 3. Auto-lanjut setelah delay singkat
                setTimeout(goToNextQuestion, 500); 
            }
        }
        
        function renderPracticeExplanation(chosenOption, correctOption) {
            explanationContainer.innerHTML = ''; 
            const explanations = questions[currentQuestionIndex].explanations;
            const correctExplanation = explanations[correctOption];
            
            // Tampilkan penjelasan untuk semua opsi, tandai yang benar dan yang dipilih salah
            Object.keys(explanations).forEach(term => {
                const explanation = explanations[term];
                const isCorrect = (term === correctOption);
                const isChosen = (term === chosenOption);
                
                // Hanya tampilkan yang benar dan yang salah dipilih (jika beda)
                if(isCorrect || (isChosen && !isCorrect)) {
                     renderSingleExplanation(term, explanation, isCorrect, explanationContainer);
                }
            });
        }
        
        // Fungsi render yang dibagikan
        function renderSingleExplanation(term, explanation, isCorrect, targetElement) {
            const optionEl = document.createElement('div');
            optionEl.classList.add('flashcard-option-detailed');
            
            if (isCorrect) {
                optionEl.classList.add('correct');
            } else {
                optionEl.classList.add('incorrect');
            }
            
            optionEl.innerHTML = `
                <strong>${term}</strong>
                <span>${explanation}</span>
            `;
            targetElement.appendChild(optionEl);
        }
        
        function goToNextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < totalQuestions) {
                showQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            
            let finalScore = 0;
            
            if (currentMode === 'exam') {
                // Hitung skor dari array userAnswers
                finalScore = userAnswers.filter(answer => answer.isCorrect).length;
                reviewButton.classList.remove('hidden'); // Tampilkan tombol review
            } else {
                // Ambil skor real-time dari mode latihan
                finalScore = score;
                reviewButton.classList.add('hidden'); // Sembunyikan tombol review
            }
            
            finalScoreText.innerText = `SKOR ANDA: ${finalScore} / ${totalQuestions}`;
            document.body.classList.add('items-center');
            document.body.classList.remove('pt-10');
        }
        
        // --- FUNGSI REVIEW BARU ---
        
        function showReviewScreen() {
            resultScreen.classList.add('hidden');
            reviewScreen.classList.remove('hidden');
            reviewContainer.innerHTML = ''; // Kosongkan review sebelumnya
            setBodyActive(); // Agar tidak terpusat
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index] || { chosen: null }; // Tangani jika soal tidak terjawab
                
                // Buat kartu review
                const reviewCard = document.createElement('div');
                reviewCard.classList.add('review-card');
                
                // Buat HTML untuk opsi
                let optionsHTML = '';
                question.options.forEach(option => {
                    let optionClass = 'review-option neutral';
                    if (option === question.correct) {
                        optionClass = 'review-option correct';
                    } else if (option === userAnswer.chosen) {
                        optionClass = 'review-option chosen-wrong';
                    }
                    
                    optionsHTML += `<div class="${optionClass}">${option}</div>`;
                });
                
                // Buat HTML untuk penjelasan
                let explanationsHTML = '';
                const explanations = question.explanations;
                const correctTerm = question.correct;
                
                // Urutkan penjelasan agar yang benar selalu di atas, diikuti yang salah (jika dipilih)
                const sortedTerms = Object.keys(explanations).sort((a, b) => {
                    if (a === correctTerm) return -1;
                    if (b === correctTerm) return 1;
                    if (a === userAnswer.chosen) return -1;
                    if (b === userAnswer.chosen) return 1;
                    return 0;
                });
                
                sortedTerms.forEach(term => {
                    const explanation = explanations[term];
                    const isCorrect = (term === correctTerm);
                    
                    let explanationClass = 'flashcard-option-detailed';
                    if (isCorrect) {
                        explanationClass += ' correct';
                    } else {
                        explanationClass += ' incorrect';
                    }
                    
                    explanationsHTML += `
                        <div class="${explanationClass}">
                            <strong>${term}</strong>
                            <span>${explanation}</span>
                        </div>
                    `;
                });
                

                // Gabungkan semuanya
                reviewCard.innerHTML = `
                    <div class="review-question">Soal ${index + 1}: ${question.question}</div>
                    <div class="review-options-grid">${optionsHTML}</div>
                    <div class="review-explanations">${explanationsHTML}</div>
                `;
                
                reviewContainer.appendChild(reviewCard);
            });
        }

        // --- Event Listeners ---
        
        // Menu Utama
        startFlashcardBtn.addEventListener('click', startFlashcardMode);
        startPracticeBtn.addEventListener('click', startPracticeMode);
        startExamBtn.addEventListener('click', startExamMode);
        
        // Layar Hasil
        restartButton.addEventListener('click', startQuiz); // Mengulangi mode terakhir
        reviewButton.addEventListener('click', showReviewScreen); // BARU
        
        // Layar Review BARU
        restartFromReviewBtn.addEventListener('click', startQuiz);
        
        // Layar Kuis
        nextQuestionButton.addEventListener('click', goToNextQuestion);
        
        // Layar Flashcard
        flashcard.addEventListener('click', flipFlashcard);
        flashcardFlip.addEventListener('click', flipFlashcard);
        flashcardPrev.addEventListener('click', prevFlashcard);
        flashcardNext.addEventListener('click', nextFlashcard);
        
        // Tombol Kembali ke Menu (Global)
        backToMenuButtons.forEach(button => {
            button.addEventListener('click', showMainMenu);
        });

    </script>
</body>
</html>
