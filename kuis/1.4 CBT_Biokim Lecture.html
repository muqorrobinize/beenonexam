<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biokimia Master: Integumen, Tulang, & Otot</title>
    <style>
        :root {
            --royal-blue: #4169E1;
            --deep-cyan: #008B8B;
            --dark-bg: #0f172a;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --text-color: #f1f5f9;
            --correct: #22c55e;
            --incorrect: #ef4444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            color: var(--text-color);
            background-color: var(--dark-bg);
            background-image: 
                radial-gradient(at 0% 0%, var(--royal-blue) 0px, transparent 50%),
                radial-gradient(at 100% 0%, var(--deep-cyan) 0px, transparent 50%),
                radial-gradient(at 100% 100%, var(--royal-blue) 0px, transparent 50%),
                radial-gradient(at 0% 100%, var(--deep-cyan) 0px, transparent 50%);
            background-attachment: fixed;
            overflow-x: hidden;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            backdrop-filter: blur(10px);
            min-height: 100vh;
        }

        h1, h2, h3 {
            text-align: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        h1 { font-size: 2.5rem; margin-bottom: 30px; }

        /* Buttons */
        .btn {
            background: linear-gradient(135deg, var(--royal-blue), var(--deep-cyan));
            border: none;
            color: white;
            padding: 12px 24px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
            border-radius: 50px;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 50px;
        }

        .menu-card {
            background: var(--glass-bg);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
            transition: transform 0.3s;
        }

        .menu-card:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 0.15);
        }

        /* Content Sections */
        .section {
            display: none;
            background: rgba(0, 0, 0, 0.4);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 20px;
        }

        .active { display: block; }

        /* Summary Mode */
        .summary-content h3 { color: #4dd0e1; text-align: left; border-bottom: 2px solid var(--royal-blue); padding-bottom: 10px; margin-top: 30px; }
        .summary-content ul { line-height: 1.6; }
        .summary-content strong { color: #ffd700; }

        /* Diagrams */
        .diagram-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            overflow-x: auto;
            color: #1e3a8a;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .diagram-caption {
            font-size: 0.9rem;
            margin-top: 10px;
            font-weight: bold;
            color: #333;
        }

        /* Flashcards */
        .flashcard-container {
            perspective: 1000px;
            width: 100%;
            height: 300px;
            margin: 20px auto;
            cursor: pointer;
        }

        .flashcard {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped { transform: rotateY(180deg); }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
            padding: 20px;
            box-sizing: border-box;
            font-size: 1.2rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .card-front {
            background: linear-gradient(135deg, #1e3a8a, #0f766e);
            color: white;
        }

        .card-back {
            background: linear-gradient(135deg, #0f766e, #1e3a8a);
            color: #ffd700;
            transform: rotateY(180deg);
        }

        .flashcard-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        /* Quiz Styles */
        .question-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .options-grid {
            display: grid;
            gap: 10px;
            margin-top: 15px;
        }

        .option-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 15px;
            text-align: left;
            color: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option-btn:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.2);
        }

        .option-btn.correct { background: var(--correct) !important; color: white; border-color: var(--correct); }
        .option-btn.wrong { background: var(--incorrect) !important; color: white; border-color: var(--incorrect); }

        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: rgba(34, 197, 94, 0.2);
            border-left: 4px solid var(--correct);
            border-radius: 5px;
            display: none;
        }
        
        .exam-score {
            font-size: 3rem;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
        }
        
        .exam-message {
            text-align: center;
            font-size: 1.5rem;
            margin-bottom: 30px;
            color: #ffd700;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(255,255,255,0.2);
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--royal-blue), var(--deep-cyan));
            width: 0%;
            transition: width 0.3s ease;
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .btn { width: 100%; margin: 5px 0; }
        }
    </style>
</head>
<body>

<div class="container">
    <div id="main-menu">
        <h1>Biokimia Master</h1>
        <p style="text-align: center; opacity: 0.8;">Sistem Integumentum, Tulang, & Otot</p>
        
        <div class="menu-grid">
            <div class="menu-card">
                <h3>üìö Mode Ringkasan</h3>
                <p>Pelajari inti materi secara komprehensif.</p>
                <button class="btn" onclick="showSection('summary-mode')">Mulai Belajar</button>
            </div>
            <div class="menu-card">
                <h3>üÉè Mode Flashcard</h3>
                <p>Hafalkan istilah penting dengan cepat.</p>
                <button class="btn" onclick="initFlashcards(); showSection('flashcard-mode')">Mulai Flashcard</button>
            </div>
            <div class="menu-card">
                <h3>üéØ Mode Latihan</h3>
                <p>60 Soal dengan pembahasan langsung.</p>
                <button class="btn" onclick="initPractice(); showSection('practice-mode')">Mulai Latihan</button>
            </div>
            <div class="menu-card">
                <h3>üìù Mode Ujian</h3>
                <p>Uji kemampuanmu tanpa bantuan.</p>
                <button class="btn" onclick="initExam(); showSection('exam-mode')">Mulai Ujian</button>
            </div>
        </div>
    </div>

    <!-- SUMMARY MODE -->
    <div id="summary-mode" class="section">
        <button class="btn btn-secondary" onclick="showSection('main-menu')">‚¨Ö Kembali ke Menu</button>
        <h2>Ringkasan Materi Biokimia</h2>
        <div class="summary-content">
            <h3>1. Sistem Integumentum (Kulit)</h3>
            <p>Sistem ini melibatkan proteksi, termoregulasi, dan sintesis Vitamin D. Komponen biokimiawi utamanya adalah:</p>
            
            <div class="diagram-container">
                <svg width="100%" height="200" viewBox="0 0 400 200">
                    <!-- Sky/Sun -->
                    <circle cx="350" cy="30" r="20" fill="#FDB813" />
                    <line x1="330" y1="30" x2="300" y2="50" stroke="#FDB813" stroke-width="2" stroke-dasharray="4" />
                    <text x="310" y="65" font-size="10" fill="#333">UV-B</text>

                    <!-- Skin Layers -->
                    <rect x="50" y="80" width="300" height="20" fill="#e2c4a6" stroke="#d4a373" />
                    <text x="60" y="95" font-size="12" fill="#5c4033">Epidermis (7-dehidrokolesterol)</text>

                    <rect x="50" y="100" width="300" height="60" fill="#d4a373" opacity="0.6" />
                    <path d="M50 100 Q 80 110, 110 100 T 170 100 T 230 100 T 290 100 T 350 100" stroke="#8b4513" fill="none" />
                    <text x="60" y="130" font-size="12" fill="#5c4033">Dermis (Kolagen & Elastin)</text>

                    <!-- Vitamin D Process -->
                    <path d="M 300 55 L 280 85" stroke="#FDB813" stroke-width="2" marker-end="url(#arrow)" />
                    <text x="250" y="180" font-size="10" fill="#333" font-style="italic">Sintesis Vit D: UV -> Kulit -> Hati -> Ginjal</text>
                </svg>
                <div class="diagram-caption">Ilustrasi 1: Struktur Kulit & Paparan UV</div>
            </div>

            <ul>
                <li><strong>Keratin:</strong> Protein struktural utama epidermis (kulit, rambut, kuku). Kaya akan asam amino <em>Sistein</em> yang membentuk ikatan disulfida (memberi kekuatan). Œ±-keratin ada di mamalia.</li>
                <li><strong>Kolagen:</strong> Protein terbanyak di tubuh (¬±30%). Memberi kekuatan tarik pada dermis. Sintesisnya butuh Vitamin C dan enzim <em>prolyl hydroxylase</em>. Asam amino dominan: Glisin, Prolin, Hidroksiprolin.</li>
                <li><strong>Elastin:</strong> Memberi elastisitas (kemampuan kembali ke bentuk semula). Kaya Glisin, Alanin, Valin. Ikatan silang unik: Desmosin.</li>
                <li><strong>Melanin:</strong> Pigmen pelindung UV. Disintesis di melanosit dari <strong>Tirosin</strong> oleh enzim <strong>Tirosinase</strong>. 
                    <br>Jalur: Tirosin ‚Üí DOPA ‚Üí Dopaquinon ‚Üí Eumelanin (coklat/hitam) atau Feomelanin (kuning/merah).</li>
                <li><strong>Sintesis Vitamin D:</strong>
                    <br>7-dehidrokolesterol (di kulit) + UV-B ‚Üí Previtamin D3 ‚Üí Vitamin D3 (Kolekalsiferol) ‚Üí Hati (25-OH-D) ‚Üí Ginjal (1,25-dihydroxyvitamin D3 / Kalsitriol - Bentuk Aktif).</li>
            </ul>

            <h3>2. Biokimia Tulang</h3>
            <p>Tulang adalah jaringan dinamis yang terus mengalami <em>remodeling</em> (resorpsi dan formasi).</p>

            <div class="diagram-container">
                <svg width="100%" height="180" viewBox="0 0 400 180">
                    <!-- Bone Surface -->
                    <path d="M 20 120 Q 200 100, 380 120 L 380 150 L 20 150 Z" fill="#e0e0e0" stroke="#999" />
                    <text x="180" y="140" font-size="12" fill="#666">Matriks Tulang</text>
                    
                    <!-- Osteoclast (Eating) -->
                    <path d="M 50 115 A 30 20 0 0 1 110 115" fill="#ffcccb" stroke="#e57373" />
                    <circle cx="65" cy="105" r="3" fill="#d32f2f" /> <circle cx="80" cy="100" r="3" fill="#d32f2f" /> <circle cx="95" cy="105" r="3" fill="#d32f2f" />
                    <text x="50" y="85" font-size="10" fill="#d32f2f" font-weight="bold">Osteoclast</text>
                    <text x="50" y="95" font-size="9" fill="#d32f2f">(Resorpsi/Penghancuran)</text>
                    <text x="110" y="110" font-size="14" fill="#d32f2f">‚Üê</text> <!-- Arrow -->

                    <!-- Osteoblast (Building) -->
                    <rect x="250" y="100" width="20" height="20" fill="#90caf9" stroke="#1e88e5" />
                    <rect x="275" y="100" width="20" height="20" fill="#90caf9" stroke="#1e88e5" />
                    <rect x="300" y="100" width="20" height="20" fill="#90caf9" stroke="#1e88e5" />
                    <text x="260" y="85" font-size="10" fill="#1565c0" font-weight="bold">Osteoblast</text>
                    <text x="260" y="95" font-size="9" fill="#1565c0">(Formasi/Pembentukan)</text>
                    
                    <!-- Cycle Text -->
                    <text x="150" y="50" font-size="14" fill="#333" font-weight="bold">Siklus Remodeling</text>
                </svg>
                <div class="diagram-caption">Ilustrasi 2: Dinamika Sel Tulang (Osteoclast vs Osteoblast)</div>
            </div>

            <ul>
                <li><strong>Komponen Organik (Osteoid):</strong> Terutama Kolagen Tipe I (90-95%).</li>
                <li><strong>Komponen Anorganik:</strong> Mineral kristal <strong>Hidroksiapatit</strong> [Ca10(PO4)6(OH)2]. Menyusun 65% massa tulang.</li>
                <li><strong>Sel Tulang:</strong>
                    <ul>
                        <li><em>Osteoblast:</em> Pembentuk tulang (formasi).</li>
                        <li><em>Osteoclast:</em> Penghancur tulang (resorpsi), menghasilkan asam dan enzim hidrolitik.</li>
                        <li><em>Osteosit:</em> Sel tulang dewasa (maintenance).</li>
                    </ul>
                </li>
                <li><strong>Regulasi Hormonal:</strong>
                    <ul>
                        <li><strong>PTH (Parathyroid Hormone):</strong> Meningkatkan Ca darah (merangsang osteoclast).</li>
                        <li><strong>Kalsitonin:</strong> Menurunkan Ca darah (menghambat osteoclast).</li>
                        <li><strong>Vitamin D (Kalsitriol):</strong> Meningkatkan absorpsi Ca dan Fosfat di usus.</li>
                    </ul>
                </li>
            </ul>

            <h3>3. Biokimia Otot</h3>
            <p>Mengubah energi kimia (ATP) menjadi energi mekanik.</p>

            <div class="diagram-container">
                <svg width="100%" height="150" viewBox="0 0 400 150">
                    <!-- Z Lines -->
                    <path d="M 50 30 L 50 120" stroke="#d32f2f" stroke-width="4" />
                    <path d="M 350 30 L 350 120" stroke="#d32f2f" stroke-width="4" />
                    <text x="40" y="25" font-size="12" fill="#d32f2f" font-weight="bold">Z-Line</text>
                    <text x="340" y="25" font-size="12" fill="#d32f2f" font-weight="bold">Z-Line</text>

                    <!-- Actin (Thin) -->
                    <line x1="50" y1="50" x2="150" y2="50" stroke="#1976d2" stroke-width="2" />
                    <line x1="50" y1="100" x2="150" y2="100" stroke="#1976d2" stroke-width="2" />
                    <line x1="350" y1="50" x2="250" y2="50" stroke="#1976d2" stroke-width="2" />
                    <line x1="350" y1="100" x2="250" y2="100" stroke="#1976d2" stroke-width="2" />
                    <text x="70" y="45" font-size="10" fill="#1976d2">Aktin (Tipis)</text>

                    <!-- Myosin (Thick) -->
                    <rect x="130" y="65" width="140" height="20" fill="#388e3c" rx="5" />
                    <!-- Myosin Heads -->
                    <path d="M 140 65 L 130 50" stroke="#388e3c" stroke-width="2" />
                    <path d="M 260 65 L 270 50" stroke="#388e3c" stroke-width="2" />
                    <path d="M 140 85 L 130 100" stroke="#388e3c" stroke-width="2" />
                    <path d="M 260 85 L 270 100" stroke="#388e3c" stroke-width="2" />
                    <text x="175" y="80" font-size="10" fill="white" font-weight="bold">Miosin (Tebal)</text>

                    <!-- Label -->
                    <text x="165" y="140" font-size="12" fill="#333" font-weight="bold">Sarkomer</text>
                </svg>
                <div class="diagram-caption">Ilustrasi 3: Unit Kontraksi Otot (Sarkomer)</div>
            </div>

            <ul>
                <li><strong>Protein Kontraktil:</strong>
                    <ul>
                        <li><em>Miosin:</em> Filamen tebal, memiliki kepala globular (ATPase).</li>
                        <li><em>Aktin:</em> Filamen tipis (F-aktin).</li>
                    </ul>
                </li>
                <li><strong>Protein Regulator:</strong>
                    <ul>
                        <li><em>Tropomiosin:</em> Menutupi situs aktif aktin saat istirahat.</li>
                        <li><em>Troponin:</em> Mengikat Ca2+ (subunit TnC) untuk menggeser tropomiosin agar kontraksi terjadi.</li>
                    </ul>
                </li>
                <li><strong>Mekanisme Kontraksi:</strong> Impuls saraf ‚Üí Pelepasan Ca2+ dari Retikulum Sarkoplasma ‚Üí Ca2+ bind ke Troponin ‚Üí Cross-bridge Aktin-Miosin ‚Üí Power stroke (butuh ATP).</li>
                <li><strong>Metabolisme Energi:</strong>
                    <ul>
                        <li><em>Anaerobik (Cepat):</em> ATP tersimpan, Fosfokreatin (10 detik pertama), Glikolisis (menghasilkan Laktat).</li>
                        <li><em>Aerobik (Lama):</em> Fosforilasi Oksidatif di mitokondria.</li>
                        <li><strong>Siklus Cori:</strong> Laktat dari otot dibawa ke hati ‚Üí diubah jadi Glukosa ‚Üí kembali ke otot.</li>
                        <li><strong>Siklus Alanin:</strong> Transport nitrogen dari otot ke hati.</li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <!-- FLASHCARD MODE -->
    <div id="flashcard-mode" class="section">
        <button class="btn btn-secondary" onclick="showSection('main-menu')">‚¨Ö Kembali ke Menu</button>
        <h2>Mode Flashcard</h2>
        <p style="text-align: center">Klik kartu untuk membalik</p>
        
        <div class="flashcard-container" onclick="flipCard()">
            <div class="flashcard" id="card">
                <div class="card-face card-front" id="card-front">
                    Loading...
                </div>
                <div class="card-face card-back" id="card-back">
                    Loading...
                </div>
            </div>
        </div>

        <div class="flashcard-controls">
            <button class="btn" onclick="prevCard()">‚ùÆ Sebelumnya</button>
            <button class="btn" onclick="nextCard()">Selanjutnya ‚ùØ</button>
        </div>
    </div>

    <!-- PRACTICE MODE -->
    <div id="practice-mode" class="section">
        <button class="btn btn-secondary" onclick="showSection('main-menu')">‚¨Ö Kembali ke Menu</button>
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2>Mode Latihan</h2>
            <span>Soal: <span id="practice-current">1</span>/60</span>
        </div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="practice-progress"></div>
        </div>

        <div id="practice-container">
            <!-- Questions injected here -->
        </div>

        <div style="text-align: center; margin-top: 20px;">
            <button class="btn" id="next-practice-btn" onclick="nextPracticeQuestion()" style="display:none;">Soal Selanjutnya ‚ùØ</button>
        </div>
    </div>

    <!-- EXAM MODE -->
    <div id="exam-mode" class="section">
        <button class="btn btn-secondary" onclick="confirmExitExam()">‚¨Ö Batal Ujian</button>
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h2>Mode Ujian</h2>
            <span>Soal: <span id="exam-current">1</span>/60</span>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="exam-progress"></div>
        </div>

        <div id="exam-container">
            <!-- Exam Questions injected here -->
        </div>

        <div id="exam-result" style="display: none; text-align: center;">
            <!-- Results injected here -->
        </div>
    </div>

</div>

<script>
    // --- DATA ---
    const flashcards = [
        { front: "Protein struktural utama pada epidermis, rambut, dan kuku", back: "Keratin" },
        { front: "Asam amino yang membentuk ikatan disulfida pada Keratin", back: "Sistein" },
        { front: "Pigmen yang melindungi kulit dari radiasi UV", back: "Melanin" },
        { front: "Enzim kunci dalam sintesis Melanin dari Tirosin", back: "Tirosinase" },
        { front: "Protein yang memberikan sifat elastisitas pada kulit", back: "Elastin" },
        { front: "Prekursor Vitamin D di kulit", back: "7-dehidrokolesterol" },
        { front: "Bentuk aktif Vitamin D (hormon)", back: "1,25-dihidroksivitamin D3 (Kalsitriol)" },
        { front: "Komponen anorganik utama tulang (kristal)", back: "Hidroksiapatit" },
        { front: "Sel pembentuk tulang", back: "Osteoblast" },
        { front: "Sel penghancur/resorpsi tulang", back: "Osteoclast" },
        { front: "Hormon yang meningkatkan kadar Kalsium darah", back: "Parathyroid Hormone (PTH)" },
        { front: "Hormon yang menurunkan kadar Kalsium darah", back: "Kalsitonin" },
        { front: "Unit kontraktil terkecil otot", back: "Sarkomer" },
        { front: "Filamen tebal pada otot", back: "Miosin" },
        { front: "Protein yang mengikat Ca2+ untuk memulai kontraksi", back: "Troponin" },
        { front: "Siklus pengubahan laktat otot menjadi glukosa di hati", back: "Siklus Cori" },
        { front: "Cadangan energi cepat di otot (fosfagen)", back: "Fosfokreatin" },
        { front: "Penyakit akibat defisiensi Vitamin C (gangguan kolagen)", back: "Scurvy (Skorbut)" },
        { front: "Tipe kolagen yang paling dominan di tulang", back: "Kolagen Tipe I" },
        { front: "Neurotransmitter di neuromuscular junction", back: "Asetilkolin" }
    ];

    const questions = [
        // INTEGUMENT (20 Soal)
        { q: "Protein struktural utama yang menyusun epidermis, rambut, dan kuku adalah...", options: ["Kolagen", "Elastin", "Keratin", "Miosin"], correct: 2, explanation: "Keratin adalah protein fibrosa utama pada struktur epidermis, rambut, dan kuku." },
        { q: "Asam amino yang banyak terdapat pada keratin dan membentuk ikatan disulfida kuat adalah...", options: ["Glisin", "Sistein", "Prolin", "Alanin"], correct: 1, explanation: "Sistein mengandung sulfur yang membentuk jembatan disulfida, memberikan kekerasan pada keratin." },
        { q: "Enzim yang mengkatalisis perubahan Tirosin menjadi DOPA dalam pembentukan melanin adalah...", options: ["Tirosinase", "Hidroksilase", "Polimerase", "Keratinase"], correct: 0, explanation: "Tirosinase adalah enzim kunci dalam jalur melanogenesis." },
        { q: "Pigmen melanin disintesis di dalam organel sel yang disebut...", options: ["Lisosom", "Ribosom", "Melanosom", "Mitokondria"], correct: 2, explanation: "Melanin diproduksi dan dikemas dalam vesikel khusus bernama melanosom di dalam melanosit." },
        { q: "Senyawa prekusor di kulit yang diubah menjadi Previtamin D3 oleh sinar UVB adalah...", options: ["Kolesterol", "7-dehidrokolesterol", "Ergosterol", "Kalsidiol"], correct: 1, explanation: "7-dehidrokolesterol di epidermis menyerap UV-B untuk membentuk previtamin D3." },
        { q: "Bentuk biologis aktif dari Vitamin D yang disintesis di ginjal adalah...", options: ["Kolekalsiferol", "25-hidroksivitamin D", "1,25-dihidroksivitamin D3", "7-dehidrokolesterol"], correct: 2, explanation: "1,25-dihidroksivitamin D3 (Kalsitriol) adalah bentuk hormon aktif." },
        { q: "Protein jaringan ikat yang memiliki kemampuan kembali ke bentuk semula setelah diregangkan adalah...", options: ["Kolagen", "Elastin", "Fibrin", "Keratin"], correct: 1, explanation: "Elastin bertanggung jawab atas elastisitas jaringan." },
        { q: "Ikatan silang unik yang ditemukan pada elastin adalah...", options: ["Ikatan Peptida", "Desmosin", "Ikatan Hidrogen", "Ikatan Glikosidik"], correct: 1, explanation: "Desmosin dan isodesmosin adalah ikatan silang yang memberi sifat elastis pada elastin." },
        { q: "Asam amino utama penyusun kolagen adalah...", options: ["Sistein dan Metionin", "Glisin, Prolin, Hidroksiprolin", "Leusin dan Isoleusin", "Triptofan dan Tirosin"], correct: 1, explanation: "Struktur triple helix kolagen kaya akan Glisin-X-Y (biasanya Prolin/Hidroksiprolin)." },
        { q: "Defisiensi Vitamin C menyebabkan gangguan sintesis kolagen yang dikenal sebagai...", options: ["Rakhitis", "Scurvy", "Osteoporosis", "Dermatitis"], correct: 1, explanation: "Vitamin C kofaktor prolyl hydroxylase; kekurangannya menyebabkan Scurvy." },
        { q: "Warna kulit manusia ditentukan terutama oleh...", options: ["Jumlah melanosit", "Jumlah dan tipe melanin", "Ketebalan lemak subkutan", "Kadar hemoglobin"], correct: 1, explanation: "Semua ras punya jumlah melanosit mirip, perbedaannya adalah aktivitas dan tipe melanin (Eumelanin/Feomelanin)." },
        { q: "Lapisan epidermis tempat terjadinya pembelahan sel keratinosit adalah...", options: ["Stratum Corneum", "Stratum Basale", "Stratum Granulosum", "Stratum Lucidum"], correct: 1, explanation: "Stratum Basale adalah lapisan germinal tempat mitosis terjadi." },
        { q: "Sebum yang diproduksi kelenjar sebasea berfungsi untuk...", options: ["Meningkatkan pH kulit", "Menjaga kelembapan dan antibakteri", "Sintesis Vitamin D", "Ekskresi limbah nitrogen"], correct: 1, explanation: "Sebum mengandung lipid yang melumasi kulit dan memiliki sifat antimikroba." },
        { q: "Reseptor hormon Vitamin D (VDR) terdapat di...", options: ["Hanya di tulang", "Hanya di usus", "Inti sel target", "Membran sel target"], correct: 2, explanation: "VDR adalah reseptor nuklear yang mengatur ekspresi gen." },
        { q: "Feomelanin adalah jenis melanin yang memberikan warna...", options: ["Hitam pekat", "Coklat gelap", "Kuning hingga merah", "Biru"], correct: 2, explanation: "Feomelanin dominan pada rambut merah/pirang." },
        { q: "Proses pematangan keratinosit dari basal hingga terkelupas disebut...", options: ["Melanogenesis", "Deskuamasi", "Ossifikasi", "Glikolisis"], correct: 1, explanation: "Deskuamasi adalah pelepasan sel kulit mati (corneocytes)." },
        { q: "Enzim yang diperlukan untuk hidroksilasi prolin pada sintesis kolagen adalah...", options: ["Prolyl hydroxylase", "Lysyl oxidase", "Collagenase", "Elastase"], correct: 0, explanation: "Prolyl hydroxylase (butuh Vit C) penting untuk stabilitas kolagen." },
        { q: "Fungsi utama lapisan Stratum Corneum adalah...", options: ["Sintesis pigmen", "Barrier fisik dan air", "Sensasi sentuhan", "Sirkulasi darah"], correct: 1, explanation: "Stratum corneum terdiri dari sel mati yang keras sebagai pelindung utama." },
        { q: "Zat yang menjaga hidrasi alami kulit (NMF) antara lain...", options: ["Kolagen", "Sodium PCA dan Asam Laktat", "Keratin", "Melanin"], correct: 1, explanation: "NMF (Natural Moisturizing Factor) termasuk Sodium PCA." },
        { q: "Efek sinar UV berlebih pada DNA sel kulit dapat memicu...", options: ["Sintesis kolagen", "Kanker kulit", "Peningkatkan elastisitas", "Osteoporosis"], correct: 1, explanation: "UV merusak DNA (dimer timin) yang bisa menyebabkan mutasi kanker." },

        // BONE (20 Soal)
        { q: "Komponen anorganik terbesar penyusun matriks tulang adalah...", options: ["Kalsium karbonat", "Hidroksiapatit", "Magnesium sulfat", "Natrium klorida"], correct: 1, explanation: "Kristal Hidroksiapatit [Ca10(PO4)6(OH)2] menyusun 65% massa tulang." },
        { q: "Sel yang berfungsi untuk resorpsi (penghancuran) tulang adalah...", options: ["Osteoblast", "Osteosit", "Osteoclast", "Kondrosit"], correct: 2, explanation: "Osteoclast mengeluarkan asam dan enzim untuk melarutkan mineral tulang." },
        { q: "Sel yang bertanggung jawab mensintesis matriks organik tulang baru adalah...", options: ["Osteoblast", "Osteoclast", "Makrofag", "Osteoprogenitor"], correct: 0, explanation: "Osteoblast membangun tulang (formasi)." },
        { q: "Hormon yang bekerja meningkatkan kadar kalsium darah dengan memicu resorpsi tulang adalah...", options: ["Kalsitonin", "Insulin", "Parathyroid Hormone (PTH)", "Estrogen"], correct: 2, explanation: "PTH menstimulasi osteoclast untuk melepas kalsium ke darah." },
        { q: "Hormon yang menurunkan kadar kalsium darah dengan menghambat osteoclast adalah...", options: ["PTH", "Kalsitonin", "Kortisol", "Tiroksin"], correct: 1, explanation: "Kalsitonin (dari tiroid) berlawanan dengan PTH." },
        { q: "Kolagen tipe berapa yang paling dominan menyusun tulang?", options: ["Tipe I", "Tipe II", "Tipe III", "Tipe IV"], correct: 0, explanation: "Kolagen Tipe I menyusun 90-95% protein tulang." },
        { q: "Penyakit tulang keropos akibat resorpsi melebihi formasi disebut...", options: ["Osteomalacia", "Osteoporosis", "Scoliosis", "Artritis"], correct: 1, explanation: "Osteoporosis terjadi ketika densitas tulang berkurang drastis." },
        { q: "Protein tulang non-kolagen yang mengikat hidroksiapatit dan bergantung pada Vitamin K adalah...", options: ["Osteocalcin", "Albumin", "Elastin", "Fibrinogen"], correct: 0, explanation: "Osteocalcin (Bone Gla Protein) penting untuk mineralisasi." },
        { q: "Proses pembentukan tulang disebut...", options: ["Ossifikasi", "Kalsifikasi", "Resorpsi", "Glikosilasi"], correct: 0, explanation: "Ossifikasi atau osteogenesis." },
        { q: "Lokasi utama penyimpanan kalsium dalam tubuh manusia adalah...", options: ["Darah", "Otot", "Tulang", "Hati"], correct: 2, explanation: "99% kalsium tubuh disimpan di tulang." },
        { q: "Bagian aktif dari osteoclast yang menempel pada tulang saat resorpsi disebut...", options: ["Ruffled border", "Cilia", "Flagella", "Microvilli"], correct: 0, explanation: "Ruffled border memperluas area permukaan untuk sekresi asam/enzim." },
        { q: "Enzim yang dikeluarkan osteoclast untuk mendegradasi kolagen adalah...", options: ["Amilase", "Cathepsin K", "Lipase", "Pepsin"], correct: 1, explanation: "Cathepsin K adalah protease utama pemecah kolagen tulang." },
        { q: "Fungsi estrogen pada tulang adalah...", options: ["Meningkatkan resorpsi", "Menghambat apoptosis osteoclast", "Meningkatkan formasi/Menghambat resorpsi", "Menghancurkan osteoblast"], correct: 2, explanation: "Estrogen melindungi tulang; defisiensi estrogen (menopause) memicu osteoporosis." },
        { q: "Sitokin yang merangsang pembentukan osteoclast (osteoklastogenesis) adalah...", options: ["OPG", "RANKL", "Interferon", "Insulin"], correct: 1, explanation: "RANKL berikatan dengan RANK di pre-osteoclast untuk pematangan." },
        { q: "Molekul yang menghambat RANKL (decoy receptor) adalah...", options: ["Osteoprotegerin (OPG)", "PTH", "Vitamin D", "TNF-alpha"], correct: 0, explanation: "OPG mencegah RANKL berikatan dengan RANK, menghambat resorpsi." },
        { q: "Mineral lain selain Kalsium dan Fosfat yang disimpan di tulang adalah...", options: ["Besi", "Magnesium", "Iodium", "Merkuri"], correct: 1, explanation: "Tulang juga menyimpan Magnesium, Natrium, dan Karbonat." },
        { q: "Target organ utama PTH selain tulang adalah...", options: ["Hati", "Ginjal", "Jantung", "Paru-paru"], correct: 1, explanation: "Di ginjal, PTH meningkatkan reabsorpsi Ca dan sintesis Vit D aktif." },
        { q: "Defisiensi Vitamin D pada anak-anak menyebabkan...", options: ["Osteoporosis", "Rakhitis (Rickets)", "Gout", "Anemia"], correct: 1, explanation: "Rakhitis adalah pelunakan tulang pada anak akibat kurang Vit D." },
        { q: "Kondisi hiperkalsemia (Ca darah tinggi) akan memicu sekresi hormon...", options: ["PTH", "Kalsitonin", "Aldosteron", "Glukagon"], correct: 1, explanation: "Tubuh merespons Ca tinggi dengan melepas Kalsitonin." },
        { q: "Osteosit terletak di dalam ruang kecil yang disebut...", options: ["Lacuna", "Kanal Havers", "Lamella", "Periosteum"], correct: 0, explanation: "Osteosit terperangkap dalam lacuna matriks tulang." },

        // MUSCLE (20 Soal)
        { q: "Protein filamen tebal pada sarkomer otot adalah...", options: ["Aktin", "Miosin", "Troponin", "Titin"], correct: 1, explanation: "Miosin membentuk filamen tebal dengan kepala globular." },
        { q: "Molekul yang menutupi situs aktif aktin saat otot relaksasi adalah...", options: ["Troponin", "Tropomiosin", "Miosin", "Kalmodulin"], correct: 1, explanation: "Tropomiosin menghalangi interaksi aktin-miosin." },
        { q: "Ion yang memicu kontraksi otot dengan berikatan pada Troponin C adalah...", options: ["Natrium", "Kalium", "Kalsium", "Magnesium"], correct: 2, explanation: "Kalsium (Ca2+) menggeser kompleks troponin-tropomiosin." },
        { q: "Sumber energi tercepat (pertama kali dipakai) saat aktivitas otot eksplosif adalah...", options: ["Glikogen", "Asam Lemak", "ATP dan Fosfokreatin", "Glukosa darah"], correct: 2, explanation: "ATP dan Fosfokreatin habis dalam hitungan detik." },
        { q: "Neurotransmitter yang dilepaskan di neuromuscular junction adalah...", options: ["Adrenalin", "Dopamin", "Asetilkolin", "Serotonin"], correct: 2, explanation: "Asetilkolin memicu potensial aksi di sarkolema otot." },
        { q: "Organel penyimpan kalsium di dalam sel otot adalah...", options: ["Mitokondria", "Retikulum Sarkoplasma", "Ribosom", "Badan Golgi"], correct: 1, explanation: "Retikulum Sarkoplasma melepaskan Ca2+ saat ada impuls." },
        { q: "Siklus metabolik yang mendaur ulang asam laktat dari otot ke hati menjadi glukosa disebut...", options: ["Siklus Krebs", "Siklus Cori", "Siklus Urea", "Siklus Calvin"], correct: 1, explanation: "Siklus Cori mencegah asidosis laktat dan mendaur ulang glukosa." },
        { q: "Jenis serabut otot yang kaya mioglobin dan mitokondria (tahan lelah) adalah...", options: ["Tipe I (Merah/Slow)", "Tipe II (Putih/Fast)", "Otot Polos", "Otot Jantung"], correct: 0, explanation: "Serabut merah (Tipe I) didesain untuk aktivitas aerobik durasi lama." },
        { q: "Protein raksasa yang menjaga stabilitas sarkomer dan elastisitas otot adalah...", options: ["Aktin", "Titin", "Nebulin", "Desmin"], correct: 1, explanation: "Titin adalah protein terbesar yang menghubungkan garis Z ke garis M." },
        { q: "Enzim yang mentransfer fosfat dari fosfokreatin ke ADP adalah...", options: ["Kreatin Kinase (CK)", "ATP Sintase", "Laktat Dehidrogenase", "Heksokinase"], correct: 0, explanation: "CK (Creatine Kinase) meregenerasi ATP dengan cepat." },
        { q: "Produk akhir glikolisis anaerobik di otot yang menyebabkan kelelahan adalah...", options: ["Piruvat", "Asetil KoA", "Asam Laktat", "Etanol"], correct: 2, explanation: "Akumulasi asam laktat menurunkan pH otot." },
        { q: "Siklus Alanin berfungsi untuk mentransportasikan gugus ... dari otot ke hati.", options: ["Karbon", "Lemak", "Nitrogen (Amino)", "Oksigen"], correct: 2, explanation: "Alanin membawa gugus amino sisa metabolisme protein agar tidak toksik." },
        { q: "Otot jantung berbeda dengan otot rangka karena bersifat...", options: ["Volunter", "Involunter dan bercabang", "Tidak berlurik", "Anaerobik murni"], correct: 1, explanation: "Otot jantung involunter, selnya bercabang, dan punya diskus interkalaris." },
        { q: "Model pergeseran filamen (Sliding Filament Theory) menjelaskan bahwa saat kontraksi...", options: ["Filamen memendek", "Sarkomer memendek karena filamen saling bergeser", "Aktin memanjang", "Miosin menghilang"], correct: 1, explanation: "Panjang filamen tetap, tapi saling tumpang tindih (sliding) sehingga sarkomer memendek." },
        { q: "Kondisi kaku mayat (Rigor Mortis) terjadi karena ketiadaan...", options: ["Kalsium", "ATP", "Oksigen", "Enzim"], correct: 1, explanation: "Tanpa ATP, kepala miosin tidak bisa lepas dari aktin, menyebabkan kekakuan." },
        { q: "Myoglobin berfungsi untuk...", options: ["Menyimpan glukosa", "Menyimpan oksigen di otot", "Mengangkut CO2", "Membentuk ATP"], correct: 1, explanation: "Myoglobin adalah protein pengikat oksigen di sel otot." },
        { q: "Unit fungsional antara neuron motorik dan serabut otot yang dipersarafinya disebut...", options: ["Motor unit", "Sarkomer", "Sinaps", "Ganglion"], correct: 0, explanation: "Motor unit terdiri dari satu neuron motorik dan semua serabut otot yang dikontrolnya." },
        { q: "Reseptor asetilkolin di otot rangka termasuk tipe...", options: ["Muskarinik", "Nikotinik", "Adrenergik", "Dopaminergik"], correct: 1, explanation: "Reseptor Nikotinik ACh membuka kanal ion Na+." },
        { q: "Enzim Laktat Dehidrogenase (LDH) mengubah Piruvat menjadi...", options: ["Glukosa", "Asetil KoA", "Laktat", "Oksaloasetat"], correct: 2, explanation: "LDH bekerja pada glikolisis anaerob." },
        { q: "Otot rangka nampak lurik karena susunan teratur dari...", options: ["Mitokondria", "Sarkomer (Aktin & Miosin)", "Inti sel", "Retikulum Endoplasma"], correct: 1, explanation: "Pita A (gelap) dan Pita I (terang) menciptakan pola lurik." }
    ];

    // --- LOGIC ---
    
    let currentFlashcard = 0;
    let practiceIndex = 0;
    let examIndex = 0;
    let examAnswers = [];
    let examScore = 0;

    function showSection(id) {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('#main-menu').forEach(el => el.style.display = 'none');
        
        if (id === 'main-menu') {
            document.getElementById('main-menu').style.display = 'block';
        } else {
            document.getElementById(id).classList.add('active');
        }
    }

    // Flashcard Logic
    function initFlashcards() {
        currentFlashcard = 0;
        updateCard();
    }

    function updateCard() {
        const card = flashcards[currentFlashcard];
        document.getElementById('card-front').textContent = card.front;
        document.getElementById('card-back').textContent = card.back;
        document.getElementById('card').classList.remove('flipped');
    }

    function flipCard() {
        document.getElementById('card').classList.toggle('flipped');
    }

    function nextCard() {
        if (currentFlashcard < flashcards.length - 1) {
            currentFlashcard++;
            updateCard();
        } else {
            currentFlashcard = 0; // Loop back
            updateCard();
        }
    }

    function prevCard() {
        if (currentFlashcard > 0) {
            currentFlashcard--;
            updateCard();
        } else {
            currentFlashcard = flashcards.length - 1;
            updateCard();
        }
    }

    // Practice Logic
    function initPractice() {
        practiceIndex = 0;
        renderPracticeQuestion();
    }

    function renderPracticeQuestion() {
        const container = document.getElementById('practice-container');
        const q = questions[practiceIndex];
        
        // Update Progress
        document.getElementById('practice-current').innerText = practiceIndex + 1;
        document.getElementById('practice-progress').style.width = `${((practiceIndex+1)/questions.length)*100}%`;
        document.getElementById('next-practice-btn').style.display = 'none';

        let html = `
            <div class="question-card">
                <h3>Soal ${practiceIndex + 1}</h3>
                <p style="font-size: 1.1rem; margin-bottom: 15px;">${q.q}</p>
                <div class="options-grid" id="practice-options">
                    ${q.options.map((opt, i) => `
                        <button class="option-btn" onclick="checkPracticeAnswer(${i})">${opt}</button>
                    `).join('')}
                </div>
                <div class="explanation" id="practice-explanation">
                    <strong>Penjelasan:</strong><br>
                    ${q.explanation}
                </div>
            </div>
        `;
        container.innerHTML = html;
    }

    function checkPracticeAnswer(selectedIndex) {
        const q = questions[practiceIndex];
        const buttons = document.querySelectorAll('#practice-options .option-btn');
        const explanation = document.getElementById('practice-explanation');

        // Disable all buttons
        buttons.forEach(btn => btn.disabled = true);

        // Highlight answers
        if (selectedIndex === q.correct) {
            buttons[selectedIndex].classList.add('correct');
            explanation.style.backgroundColor = 'rgba(34, 197, 94, 0.2)';
            explanation.style.borderColor = 'var(--correct)';
            explanation.innerHTML = `<strong>‚úÖ Benar!</strong><br>${q.explanation}`;
        } else {
            buttons[selectedIndex].classList.add('wrong');
            buttons[q.correct].classList.add('correct');
            explanation.style.backgroundColor = 'rgba(239, 68, 68, 0.2)';
            explanation.style.borderColor = 'var(--incorrect)';
            explanation.innerHTML = `<strong>‚ùå Salah.</strong> Jawaban yang benar adalah: <strong>${q.options[q.correct]}</strong>.<br><br>${q.explanation}`;
        }

        explanation.style.display = 'block';
        document.getElementById('next-practice-btn').style.display = 'inline-block';
    }

    function nextPracticeQuestion() {
        if (practiceIndex < questions.length - 1) {
            practiceIndex++;
            renderPracticeQuestion();
        } else {
            alert("Selamat! Kamu telah menyelesaikan semua soal latihan.");
            showSection('main-menu');
        }
    }

    // Exam Logic
    function initExam() {
        // Shuffle questions for exam? Or keep order? 
        // Let's use the same questions but shuffle order slightly or just linear for simplicity but strict UI
        examIndex = 0;
        examScore = 0;
        examAnswers = new Array(questions.length).fill(null);
        document.getElementById('exam-result').style.display = 'none';
        document.getElementById('exam-container').style.display = 'block';
        renderExamQuestion();
    }

    function renderExamQuestion() {
        const container = document.getElementById('exam-container');
        const q = questions[examIndex];
        
        document.getElementById('exam-current').innerText = examIndex + 1;
        document.getElementById('exam-progress').style.width = `${((examIndex+1)/questions.length)*100}%`;

        let html = `
            <div class="question-card">
                <h3>Soal Ujian ${examIndex + 1}</h3>
                <p style="font-size: 1.1rem; margin-bottom: 15px;">${q.q}</p>
                <div class="options-grid">
                    ${q.options.map((opt, i) => `
                        <button class="option-btn" onclick="submitExamAnswer(${i})">${opt}</button>
                    `).join('')}
                </div>
            </div>
        `;
        container.innerHTML = html;
    }

    function submitExamAnswer(selectedIndex) {
        examAnswers[examIndex] = selectedIndex;
        
        if (examIndex < questions.length - 1) {
            examIndex++;
            renderExamQuestion();
        } else {
            calculateExamResult();
        }
    }

    function calculateExamResult() {
        let correctCount = 0;
        questions.forEach((q, i) => {
            if (examAnswers[i] === q.correct) correctCount++;
        });

        const score = Math.round((correctCount / questions.length) * 100);
        showExamResult(score);
    }

    function showExamResult(score) {
        document.getElementById('exam-container').style.display = 'none';
        const resultDiv = document.getElementById('exam-result');
        let message = "";
        let emoji = "";

        if (score <= 30) {
            message = "Kamu harus belajar lagi, jangan main mulu!";
            emoji = "üò§üìö";
        } else if (score <= 60) {
            message = "Tingkatin lagi yaa!";
            emoji = "ü§îüí™";
        } else {
            message = "Selamat kamu sudah paham sejauh ini";
            emoji = "ü•≥üéì";
        }

        resultDiv.innerHTML = `
            <div class="exam-score">${score}/100</div>
            <div style="font-size: 4rem; margin-bottom: 10px;">${emoji}</div>
            <div class="exam-message">"${message}"</div>
            <p>Jawaban Benar: ${Math.round((score/100)*questions.length)} dari ${questions.length} soal.</p>
            <button class="btn" onclick="showSection('main-menu')">Kembali ke Menu</button>
            <button class="btn btn-secondary" onclick="initExam()">Ujian Ulang</button>
        `;
        resultDiv.style.display = 'block';
    }

    function confirmExitExam() {
        if(confirm("Yakin ingin keluar dari ujian? Progres akan hilang.")) {
            showSection('main-menu');
        }
    }

</script>

</body>
</html>
